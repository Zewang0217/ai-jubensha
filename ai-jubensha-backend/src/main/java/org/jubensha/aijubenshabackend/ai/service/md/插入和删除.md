# æ’å…¥å®ä½“ | Milvus æ–‡æ¡£

[ğŸš€ Zilliz äº‘ï¼šå…¨é¢ç®¡ç† Milvus - é€Ÿåº¦å¿« 10 å€ã€‚é›¶çƒ¦æ¼ã€‚ä¸“ä¸ºäººå·¥æ™ºèƒ½æ‰“é€ ã€‚ç«‹å³å…è´¹è¯•ç”¨ â†’](https://cloud.zilliz.com/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_top_banner&utm_content=docs/zh/insert-update-delete.md)

[![Milvus](/images/layout/milvus-logo.svg)](/zh)

[![Zilliz](/images/layout/zilliz-logo.svg)](https://zilliz.com/)

-   ä¸ºä»€ä¹ˆé€‰æ‹© Milvus
    
    -   [ä»€ä¹ˆæ˜¯ Milvus](/zh/intro)
    -   [ä½¿ç”¨æ¡ˆä¾‹](/zh/use-cases)
    
-   [æ–‡æ¡£](/docs/zh)
-   æ•™ç¨‹
    
    -   [è®­ç»ƒè¥](/zh/bootcamp)
    -   [æ¼”ç¤º](/zh/milvus-demos)
    -   [è§†é¢‘](https://www.youtube.com/c/MilvusVectorDatabase)
    
-   å·¥å…·
    
    -   [Attu](https://github.com/zilliztech/attu)
    -   [Milvus CLI](https://github.com/zilliztech/milvus_cli)
    -   [é…ç½®å·¥å…·](/zh/tools/sizing)
    -   [Milvus å¤‡ä»½](https://github.com/zilliztech/milvus-backup)
    -   [VTS](https://github.com/zilliztech/vts)
    -   [æ·±åº¦æœç´¢å™¨](https://github.com/zilliztech/deep-searcher)
    -   [Claude Context](https://github.com/zilliztech/claude-context)
    
-   [åšå®¢](/zh/blog)
-   ç¤¾åŒº
    
    -   [ç±³å°”æ²ƒæ–¯åŠå…¬æ—¶é—´](https://meetings.hubspot.com/chloe-williams1/milvus-office-hour?uuid=4cb203e5-482a-47e0-90a6-7acc511d61f4)
    -   [æ¾å¼›](https://milvus.io/slack )
    -   [Discord](https://milvus.io/discord)
    -   [GitHub](https://github.com/milvus-io/milvus/discussions)
    -   [æ›´å¤šç¤¾åŒº](/zh/community)
    

ç®€ä½“ä¸­æ–‡

[Star42.6K](https://github.com/milvus-io/milvus)[é¢„çº¦æ¼”ç¤º](/zh/contact)[

å¼€å§‹ä½¿ç”¨

](https://cloud.zilliz.com/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_nav_right&utm_content=docs/zh/insert-update-delete.md)

[![Milvus](/images/layout/milvus-logo.svg)](/zh)

[![Zilliz](/images/layout/zilliz-logo.svg)](https://zilliz.com/)

ç®€ä½“ä¸­æ–‡

æœç´¢K

[é¦–é¡µ](/docs/zh)

[v2.6.x](/docs/insert-update-delete.md)

â€‹

-   å…³äº Milvus
    
-   å¼€å§‹
    
-   æ¦‚å¿µ
    
-   ç”¨æˆ·æŒ‡å—
    
    -   [æ•°æ®åº“](/docs/zh/manage_databases.md)
        
    -   Collections
        
    -   Schema å’Œæ•°æ®å­—æ®µ
        
    -   æ’å…¥å’Œåˆ é™¤
        
        -   [æ’å…¥å®ä½“](/docs/zh/insert-update-delete.md)
            
        -   [ä¸Šä¼ å®ä½“](/docs/zh/upsert-entities.md)
            
        -   [åˆ é™¤å®ä½“](/docs/zh/delete-entities.md)
            
        
    -   ç´¢å¼•
        
    -   æœç´¢
        
    -   Embeddings &amp; Rerankers
        
    -   å­˜å‚¨ä¼˜åŒ–
        
    
-   æ•°æ®å¯¼å…¥
    
-   ç®¡ç†æŒ‡å—
    
-   å·¥å…·
    
-   é›†æˆ
    
-   æ•™ç¨‹
    
-   å¸¸è§é—®é¢˜
    
-   API Reference
    

-   [é¦–é¡µ](/zh)
-   [æ–‡æ¡£](/docs/zh)
-   ç”¨æˆ·æŒ‡å—
    
-   æ’å…¥å’Œåˆ é™¤
    
-   æ’å…¥å®ä½“
    

# æ’å…¥å®ä½“

Collections ä¸­çš„å®ä½“æ˜¯æŒ‡å…±äº«åŒä¸€ç»„å­—æ®µçš„æ•°æ®è®°å½•ã€‚æ¯æ¡æ•°æ®è®°å½•ä¸­çš„å­—æ®µå€¼æ„æˆä¸€ä¸ªå®ä½“ã€‚æœ¬é¡µä»‹ç»å¦‚ä½•åœ¨ Collections ä¸­æ’å…¥å®ä½“ã€‚

å¦‚æœåœ¨åˆ›å»º Collections ååŠ¨æ€æ·»åŠ æ–°å­—æ®µï¼Œå¹¶ä¸”åœ¨æ’å…¥å®ä½“æ—¶æ²¡æœ‰ä¸ºè¿™äº›å­—æ®µæŒ‡å®šå€¼ï¼ŒMilvus ä¼šè‡ªåŠ¨ç”¨å®šä¹‰çš„é»˜è®¤å€¼å¡«å……å®ƒä»¬ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®é»˜è®¤å€¼ï¼Œåˆ™å¡«å…… NULLã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[å‘ç°æœ‰ Collections æ·»åŠ å­—æ®µ](/docs/zh/add-fields-to-an-existing-collection.md)ã€‚

-   **åˆ›å»º Collections åæ·»åŠ çš„å­—æ®µ**ï¼šå¦‚æœåœ¨åˆ›å»ºåå‘ Collections æ·»åŠ æ–°å­—æ®µï¼Œå¹¶ä¸”åœ¨æ’å…¥æ—¶æ²¡æœ‰æŒ‡å®šå€¼ï¼ŒMilvus ä¼šè‡ªåŠ¨ç”¨å®šä¹‰çš„é»˜è®¤å€¼å¡«å……å®ƒä»¬ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®é»˜è®¤å€¼ï¼Œåˆ™å¡«å…… NULLã€‚æœ‰å…³è¯¦æƒ…ï¼Œè¯·å‚é˜…[å‘ç°æœ‰ Collections æ·»åŠ å­—æ®µ](/docs/zh/add-fields-to-an-existing-collection.md)ã€‚
    
-   **é‡å¤å¤„ç†**ï¼šæ ‡å‡†`insert` æ“ä½œç¬¦ä¸ä¼šæ£€æŸ¥ä¸»é”®æ˜¯å¦é‡å¤ã€‚ä½¿ç”¨ç°æœ‰ä¸»é”®æ’å…¥æ•°æ®ä¼šåˆ›å»ºå…·æœ‰ç›¸åŒé”®çš„æ–°å®ä½“ï¼Œä»è€Œå¯¼è‡´æ•°æ®é‡å¤å’Œæ½œåœ¨çš„åº”ç”¨é—®é¢˜ã€‚è¦æ›´æ–°ç°æœ‰å®ä½“æˆ–é¿å…é‡å¤ï¼Œè¯·ä½¿ç”¨ **`upsert`**æ“ä½œç¬¦ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… "[æ›´æ–°å®ä½“](/docs/zh/upsert-entities.md)"ã€‚
    

## å®ä½“æ¦‚è¿°

åœ¨ Milvus ä¸­ï¼Œ**å®ä½“**æŒ‡çš„æ˜¯**Collections**ä¸­å…±äº«ç›¸åŒ**Schema** çš„æ•°æ®è®°å½•ï¼Œè¡Œä¸­æ¯ä¸ªå­—æ®µçš„æ•°æ®æ„æˆä¸€ä¸ªå®ä½“ã€‚å› æ­¤ï¼ŒåŒä¸€ Collections ä¸­çš„å®ä½“å…·æœ‰ç›¸åŒçš„å±æ€§ï¼ˆå¦‚å­—æ®µåç§°ã€æ•°æ®ç±»å‹å’Œå…¶ä»–çº¦æŸï¼‰ã€‚

å°†å®ä½“æ’å…¥ Collections æ—¶ï¼Œè¦æ’å…¥çš„å®ä½“åªæœ‰åŒ…å« Schema ä¸­å®šä¹‰çš„æ‰€æœ‰å­—æ®µæ‰èƒ½æˆåŠŸæ·»åŠ ã€‚æ’å…¥çš„å®ä½“å°†æŒ‰æ’å…¥é¡ºåºè¿›å…¥åä¸º**\_default**çš„åˆ†åŒºã€‚å¦‚æœå­˜åœ¨æŸä¸ªåˆ†åŒºï¼Œä¹Ÿå¯ä»¥é€šè¿‡åœ¨æ’å…¥è¯·æ±‚ä¸­æŒ‡å®šåˆ†åŒºåç§°ï¼Œå°†å®ä½“æ’å…¥è¯¥åˆ†åŒºã€‚

Milvus è¿˜æ”¯æŒåŠ¨æ€å­—æ®µï¼Œä»¥ä¿æŒ Collections çš„å¯æ‰©å±•æ€§ã€‚å¯ç”¨åŠ¨æ€å­—æ®µåï¼Œä½ å¯ä»¥åœ¨ Collections ä¸­æ’å…¥ Schema ä¸­æœªå®šä¹‰çš„å­—æ®µã€‚è¿™äº›å­—æ®µå’Œå€¼å°†ä½œä¸ºé”®å€¼å¯¹å­˜å‚¨åœ¨åä¸º**$meta** çš„ä¿ç•™å­—æ®µä¸­ã€‚æœ‰å…³åŠ¨æ€å­—æ®µçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…åŠ¨æ€å­—æ®µã€‚

## å°†å®ä½“æ’å…¥ Collections

åœ¨æ’å…¥æ•°æ®ä¹‹å‰ï¼Œéœ€è¦æ ¹æ® Schema å°†æ•°æ®ç»„ç»‡åˆ°å­—å…¸åˆ—è¡¨ä¸­ï¼Œæ¯ä¸ªå­—å…¸ä»£è¡¨ä¸€ä¸ªå®ä½“ï¼Œå¹¶åŒ…å« Schema ä¸­å®šä¹‰çš„æ‰€æœ‰å­—æ®µã€‚å¦‚æœ Collection å¯ç”¨äº†åŠ¨æ€å­—æ®µï¼Œæ¯ä¸ªå­—å…¸è¿˜å¯ä»¥åŒ…å« Schema ä¸­æœªå®šä¹‰çš„å­—æ®µã€‚

æœ¬èŠ‚å°†å‘ä»¥å¿«é€Ÿè®¾ç½®æ–¹å¼åˆ›å»ºçš„ Collection ä¸­æ’å…¥å®ä½“ã€‚ä»¥è¿™ç§æ–¹å¼åˆ›å»ºçš„ Collection åªæœ‰ä¸¤ä¸ªå­—æ®µï¼Œåˆ†åˆ«åä¸º**id**å’Œ**å‘é‡**ã€‚æ­¤å¤–ï¼Œè¯¥ Collections å¯ç”¨äº†åŠ¨æ€å­—æ®µï¼Œå› æ­¤ç¤ºä¾‹ä»£ç ä¸­çš„å®ä½“åŒ…å«ä¸€ä¸ªåä¸º**color**çš„å­—æ®µï¼Œè¯¥å­—æ®µæœªåœ¨ Schema ä¸­å®šä¹‰ã€‚

[Python](#python) [Java](#java) [NodeJS](#javascript) [Go](#go) [cURL](#bash)

```python
from pymilvus import MilvusClient

client = MilvusClient(
    uri="http://localhost:19530",
    token="root:Milvus"
)

data=[
    {"id": 0, "vector": [0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592], "color": "pink_8682"},
    {"id": 1, "vector": [0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104], "color": "red_7025"},
    {"id": 2, "vector": [0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592], "color": "orange_6781"},
    {"id": 3, "vector": [0.3172005263489739, 0.9719044792798428, -0.36981146090600725, -0.4860894583077995, 0.95791889146345], "color": "pink_9298"},
    {"id": 4, "vector": [0.4452349528804562, -0.8757026943054742, 0.8220779437047674, 0.46406290649483184, 0.30337481143159106], "color": "red_4794"},
    {"id": 5, "vector": [0.985825131989184, -0.8144651566660419, 0.6299267002202009, 0.1206906911183383, -0.1446277761879955], "color": "yellow_4222"},
    {"id": 6, "vector": [0.8371977790571115, -0.015764369584852833, -0.31062937026679327, -0.562666951622192, -0.8984947637863987], "color": "red_9392"},
    {"id": 7, "vector": [-0.33445148015177995, -0.2567135004164067, 0.8987539745369246, 0.9402995886420709, 0.5378064918413052], "color": "grey_8510"},
    {"id": 8, "vector": [0.39524717779832685, 0.4000257286739164, -0.5890507376891594, -0.8650502298996872, -0.6140360785406336], "color": "white_9381"},
    {"id": 9, "vector": [0.5718280481994695, 0.24070317428066512, -0.3737913482606834, -0.06726932177492717, -0.6980531615588608], "color": "purple_4976"}
]

res = client.insert(
    collection_name="quick_setup",
    data=data
)

print(res)

# Output
# {'insert_count': 10, 'ids': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]}

  
    
  
```

```java
import com.google.gson.Gson;
import com.google.gson.JsonObject;
import io.milvus.v2.client.ConnectConfig;
import io.milvus.v2.client.MilvusClientV2;
import io.milvus.v2.service.vector.request.InsertReq;
import io.milvus.v2.service.vector.response.InsertResp;

import java.util.*;

MilvusClientV2 client = new MilvusClientV2(ConnectConfig.builder()
        .uri("http://localhost:19530")
        .token("root:Milvus")
        .build());

Gson gson = new Gson();
List<JsonObject> data = Arrays.asList(
        gson.fromJson("{\"id\": 0, \"vector\": [0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592], \"color\": \"pink_8682\"}", JsonObject.class),
        gson.fromJson("{\"id\": 1, \"vector\": [0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104], \"color\": \"red_7025\"}", JsonObject.class),
        gson.fromJson("{\"id\": 2, \"vector\": [0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592], \"color\": \"orange_6781\"}", JsonObject.class),
        gson.fromJson("{\"id\": 3, \"vector\": [0.3172005263489739, 0.9719044792798428, -0.36981146090600725, -0.4860894583077995, 0.95791889146345], \"color\": \"pink_9298\"}", JsonObject.class),
        gson.fromJson("{\"id\": 4, \"vector\": [0.4452349528804562, -0.8757026943054742, 0.8220779437047674, 0.46406290649483184, 0.30337481143159106], \"color\": \"red_4794\"}", JsonObject.class),
        gson.fromJson("{\"id\": 5, \"vector\": [0.985825131989184, -0.8144651566660419, 0.6299267002202009, 0.1206906911183383, -0.1446277761879955], \"color\": \"yellow_4222\"}", JsonObject.class),
        gson.fromJson("{\"id\": 6, \"vector\": [0.8371977790571115, -0.015764369584852833, -0.31062937026679327, -0.562666951622192, -0.8984947637863987], \"color\": \"red_9392\"}", JsonObject.class),
        gson.fromJson("{\"id\": 7, \"vector\": [-0.33445148015177995, -0.2567135004164067, 0.8987539745369246, 0.9402995886420709, 0.5378064918413052], \"color\": \"grey_8510\"}", JsonObject.class),
        gson.fromJson("{\"id\": 8, \"vector\": [0.39524717779832685, 0.4000257286739164, -0.5890507376891594, -0.8650502298996872, -0.6140360785406336], \"color\": \"white_9381\"}", JsonObject.class),
        gson.fromJson("{\"id\": 9, \"vector\": [0.5718280481994695, 0.24070317428066512, -0.3737913482606834, -0.06726932177492717, -0.6980531615588608], \"color\": \"purple_4976\"}", JsonObject.class)
);

InsertReq insertReq = InsertReq.builder()
        .collectionName("quick_setup")
        .data(data)
        .build();

InsertResp insertResp = client.insert(insertReq);
System.out.println(insertResp);

// Output:
//
// InsertResp(InsertCnt=10, primaryKeys=[0, 1, 2, 3, 4, 5, 6, 7, 8, 9])

  
    
  
```

```javascript
const { MilvusClient, DataType } = require("@zilliz/milvus2-sdk-node")

const address = "http://localhost:19530";
const token = "root:Milvus";
const client = new MilvusClient({address, token});

// 3. Insert some data

var data = [
    {id: 0, vector: [0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592], color: "pink_8682"},
    {id: 1, vector: [0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104], color: "red_7025"},
    {id: 2, vector: [0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592], color: "orange_6781"},
    {id: 3, vector: [0.3172005263489739, 0.9719044792798428, -0.36981146090600725, -0.4860894583077995, 0.95791889146345], color: "pink_9298"},
    {id: 4, vector: [0.4452349528804562, -0.8757026943054742, 0.8220779437047674, 0.46406290649483184, 0.30337481143159106], color: "red_4794"},
    {id: 5, vector: [0.985825131989184, -0.8144651566660419, 0.6299267002202009, 0.1206906911183383, -0.1446277761879955], color: "yellow_4222"},
    {id: 6, vector: [0.8371977790571115, -0.015764369584852833, -0.31062937026679327, -0.562666951622192, -0.8984947637863987], color: "red_9392"},
    {id: 7, vector: [-0.33445148015177995, -0.2567135004164067, 0.8987539745369246, 0.9402995886420709, 0.5378064918413052], color: "grey_8510"},
    {id: 8, vector: [0.39524717779832685, 0.4000257286739164, -0.5890507376891594, -0.8650502298996872, -0.6140360785406336], color: "white_9381"},
    {id: 9, vector: [0.5718280481994695, 0.24070317428066512, -0.3737913482606834, -0.06726932177492717, -0.6980531615588608], color: "purple_4976"}        
]

var res = await client.insert({
    collection_name: "quick_setup",
    data: data,
})

console.log(res.insert_cnt)

// Output
// 
// 10
// 

  
    
  
```

```go
import (
    "context"
    "fmt"

    "github.com/milvus-io/milvus/client/v2/column"
    "github.com/milvus-io/milvus/client/v2/milvusclient"
)

ctx, cancel := context.WithCancel(context.Background())
defer cancel()

milvusAddr := "localhost:19530"
client, err := milvusclient.New(ctx, &milvusclient.ClientConfig{
    Address: milvusAddr,
})
if err != nil {
    fmt.Println(err.Error())
    // handle error
}
defer client.Close(ctx)

dynamicColumn := column.NewColumnString("color", []string{
    "pink_8682", "red_7025", "orange_6781", "pink_9298", "red_4794", "yellow_4222", "red_9392", "grey_8510", "white_9381", "purple_4976",
})

_, err = client.Insert(ctx, milvusclient.NewColumnBasedInsertOption("quick_setup").
    WithInt64Column("id", []int64{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}).
    WithFloatVectorColumn("vector", 5, [][]float32{
        {0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592},
        {0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104},
        {0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592},
        {0.3172005263489739, 0.9719044792798428, -0.36981146090600725, -0.4860894583077995, 0.95791889146345},
        {0.4452349528804562, -0.8757026943054742, 0.8220779437047674, 0.46406290649483184, 0.30337481143159106},
        {0.985825131989184, -0.8144651566660419, 0.6299267002202009, 0.1206906911183383, -0.1446277761879955},
        {0.8371977790571115, -0.015764369584852833, -0.31062937026679327, -0.562666951622192, -0.8984947637863987},
        {-0.33445148015177995, -0.2567135004164067, 0.8987539745369246, 0.9402995886420709, 0.5378064918413052},
        {0.39524717779832685, 0.4000257286739164, -0.5890507376891594, -0.8650502298996872, -0.6140360785406336},
        {0.5718280481994695, 0.24070317428066512, -0.3737913482606834, -0.06726932177492717, -0.6980531615588608},
    }).
    WithColumns(dynamicColumn),
)
if err != nil {
    fmt.Println(err.Error())
    // handle err
}

  
    
  
```

```bash
export CLUSTER_ENDPOINT="http://localhost:19530"
export TOKEN="root:Milvus"

curl --request POST \
--url "${CLUSTER_ENDPOINT}/v2/vectordb/entities/insert" \
--header "Authorization: Bearer ${TOKEN}" \
--header "Content-Type: application/json" \
-d '{
    "data": [
        {"id": 0, "vector": [0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592], "color": "pink_8682"},
        {"id": 1, "vector": [0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104], "color": "red_7025"},
        {"id": 2, "vector": [0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592], "color": "orange_6781"},
        {"id": 3, "vector": [0.3172005263489739, 0.9719044792798428, -0.36981146090600725, -0.4860894583077995, 0.95791889146345], "color": "pink_9298"},
        {"id": 4, "vector": [0.4452349528804562, -0.8757026943054742, 0.8220779437047674, 0.46406290649483184, 0.30337481143159106], "color": "red_4794"},
        {"id": 5, "vector": [0.985825131989184, -0.8144651566660419, 0.6299267002202009, 0.1206906911183383, -0.1446277761879955], "color": "yellow_4222"},
        {"id": 6, "vector": [0.8371977790571115, -0.015764369584852833, -0.31062937026679327, -0.562666951622192, -0.8984947637863987], "color": "red_9392"},
        {"id": 7, "vector": [-0.33445148015177995, -0.2567135004164067, 0.8987539745369246, 0.9402995886420709, 0.5378064918413052], "color": "grey_8510"},
        {"id": 8, "vector": [0.39524717779832685, 0.4000257286739164, -0.5890507376891594, -0.8650502298996872, -0.6140360785406336], "color": "white_9381"},
        {"id": 9, "vector": [0.5718280481994695, 0.24070317428066512, -0.3737913482606834, -0.06726932177492717, -0.6980531615588608], "color": "purple_4976"}        
    ],
    "collectionName": "quick_setup"
}'

# {
#     "code": 0,
#     "data": {
#         "insertCount": 10,
#         "insertIds": [
#             0,
#             1,
#             2,
#             3,
#             4,
#             5,
#             6,
#             7,
#             8,
#             9
#         ]
#     }
# }

  
    
  
```

## å°†å®ä½“æ’å…¥åˆ†åŒº

æ‚¨è¿˜å¯ä»¥å°†å®ä½“æ’å…¥æŒ‡å®šçš„åˆ†åŒºã€‚ä»¥ä¸‹ä»£ç ç‰‡æ®µå‡å®šæ‚¨çš„ Collections ä¸­æœ‰ä¸€ä¸ªåä¸º**PartitionA**çš„åˆ†åŒºã€‚

[Python](#python) [Java](#java) [NodeJS](#javascript) [Go](#go) [cURL](#bash)

```python
data=[
    {"id": 10, "vector": [0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592], "color": "pink_8682"},
    {"id": 11, "vector": [0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104], "color": "red_7025"},
    {"id": 12, "vector": [0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592], "color": "orange_6781"},
    {"id": 13, "vector": [0.3172005263489739, 0.9719044792798428, -0.36981146090600725, -0.4860894583077995, 0.95791889146345], "color": "pink_9298"},
    {"id": 14, "vector": [0.4452349528804562, -0.8757026943054742, 0.8220779437047674, 0.46406290649483184, 0.30337481143159106], "color": "red_4794"},
    {"id": 15, "vector": [0.985825131989184, -0.8144651566660419, 0.6299267002202009, 0.1206906911183383, -0.1446277761879955], "color": "yellow_4222"},
    {"id": 16, "vector": [0.8371977790571115, -0.015764369584852833, -0.31062937026679327, -0.562666951622192, -0.8984947637863987], "color": "red_9392"},
    {"id": 17, "vector": [-0.33445148015177995, -0.2567135004164067, 0.8987539745369246, 0.9402995886420709, 0.5378064918413052], "color": "grey_8510"},
    {"id": 18, "vector": [0.39524717779832685, 0.4000257286739164, -0.5890507376891594, -0.8650502298996872, -0.6140360785406336], "color": "white_9381"},
    {"id": 19, "vector": [0.5718280481994695, 0.24070317428066512, -0.3737913482606834, -0.06726932177492717, -0.6980531615588608], "color": "purple_4976"}
]

res = client.insert(
    collection_name="quick_setup",
    partition_name="partitionA",
    data=data
)

print(res)

# Output
# {'insert_count': 10, 'ids': [10, 11, 12, 13, 14, 15, 16, 17, 18, 19]}

  
    
  
```

```java
import com.google.gson.Gson;
import com.google.gson.JsonObject;
import io.milvus.v2.service.vector.request.InsertReq;
import io.milvus.v2.service.vector.response.InsertResp;

import java.util.*;

Gson gson = new Gson();
List<JsonObject> data = Arrays.asList(
        gson.fromJson("{\"id\": 10, \"vector\": [0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592], \"color\": \"pink_8682\"}", JsonObject.class),
        gson.fromJson("{\"id\": 11, \"vector\": [0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104], \"color\": \"red_7025\"}", JsonObject.class),
        gson.fromJson("{\"id\": 12, \"vector\": [0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592], \"color\": \"orange_6781\"}", JsonObject.class),
        gson.fromJson("{\"id\": 13, \"vector\": [0.3172005263489739, 0.9719044792798428, -0.36981146090600725, -0.4860894583077995, 0.95791889146345], \"color\": \"pink_9298\"}", JsonObject.class),
        gson.fromJson("{\"id\": 14, \"vector\": [0.4452349528804562, -0.8757026943054742, 0.8220779437047674, 0.46406290649483184, 0.30337481143159106], \"color\": \"red_4794\"}", JsonObject.class),
        gson.fromJson("{\"id\": 15, \"vector\": [0.985825131989184, -0.8144651566660419, 0.6299267002202009, 0.1206906911183383, -0.1446277761879955], \"color\": \"yellow_4222\"}", JsonObject.class),
        gson.fromJson("{\"id\": 16, \"vector\": [0.8371977790571115, -0.015764369584852833, -0.31062937026679327, -0.562666951622192, -0.8984947637863987], \"color\": \"red_9392\"}", JsonObject.class),
        gson.fromJson("{\"id\": 17, \"vector\": [-0.33445148015177995, -0.2567135004164067, 0.8987539745369246, 0.9402995886420709, 0.5378064918413052], \"color\": \"grey_8510\"}", JsonObject.class),
        gson.fromJson("{\"id\": 18, \"vector\": [0.39524717779832685, 0.4000257286739164, -0.5890507376891594, -0.8650502298996872, -0.6140360785406336], \"color\": \"white_9381\"}", JsonObject.class),
        gson.fromJson("{\"id\": 19, \"vector\": [0.5718280481994695, 0.24070317428066512, -0.3737913482606834, -0.06726932177492717, -0.6980531615588608], \"color\": \"purple_4976\"}", JsonObject.class)
);

InsertReq insertReq = InsertReq.builder()
        .collectionName("quick_setup")
        .partitionName("partitionA")
        .data(data)
        .build();

InsertResp insertResp = client.insert(insertReq);
System.out.println(insertResp);

// Output:
//
// InsertResp(InsertCnt=10, primaryKeys=[10, 11, 12, 13, 14, 15, 16, 17, 18, 19])

  
    
  
```

```javascript
const { MilvusClient, DataType } = require("@zilliz/milvus2-sdk-node")

// 3. Insert some data

var data = [
    {id: 10, vector: [0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592], color: "pink_8682"},
    {id: 11, vector: [0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104], color: "red_7025"},
    {id: 12, vector: [0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592], color: "orange_6781"},
    {id: 13, vector: [0.3172005263489739, 0.9719044792798428, -0.36981146090600725, -0.4860894583077995, 0.95791889146345], color: "pink_9298"},
    {id: 14, vector: [0.4452349528804562, -0.8757026943054742, 0.8220779437047674, 0.46406290649483184, 0.30337481143159106], color: "red_4794"},
    {id: 15, vector: [0.985825131989184, -0.8144651566660419, 0.6299267002202009, 0.1206906911183383, -0.1446277761879955], color: "yellow_4222"},
    {id: 16, vector: [0.8371977790571115, -0.015764369584852833, -0.31062937026679327, -0.562666951622192, -0.8984947637863987], color: "red_9392"},
    {id: 17, vector: [-0.33445148015177995, -0.2567135004164067, 0.8987539745369246, 0.9402995886420709, 0.5378064918413052], color: "grey_8510"},
    {id: 18, vector: [0.39524717779832685, 0.4000257286739164, -0.5890507376891594, -0.8650502298996872, -0.6140360785406336], color: "white_9381"},
    {id: 19, vector: [0.5718280481994695, 0.24070317428066512, -0.3737913482606834, -0.06726932177492717, -0.6980531615588608], color: "purple_4976"}        
]

var res = await client.insert({
    collection_name: "quick_setup",
    partition_name: "partitionA",
    data: data,
})

console.log(res.insert_cnt)

// Output
// 
// 10
// 

  
    
  
```

```go
dynamicColumn = column.NewColumnString("color", []string{
    "pink_8682", "red_7025", "orange_6781", "pink_9298", "red_4794", "yellow_4222", "red_9392", "grey_8510", "white_9381", "purple_4976",
})

_, err = client.Insert(ctx, milvusclient.NewColumnBasedInsertOption("quick_setup").
    WithPartition("partitionA").
    WithInt64Column("id", []int64{10, 11, 12, 13, 14, 15, 16, 17, 18, 19}).
    WithFloatVectorColumn("vector", 5, [][]float32{
        {0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592},
        {0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104},
        {0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592},
        {0.3172005263489739, 0.9719044792798428, -0.36981146090600725, -0.4860894583077995, 0.95791889146345},
        {0.4452349528804562, -0.8757026943054742, 0.8220779437047674, 0.46406290649483184, 0.30337481143159106},
        {0.985825131989184, -0.8144651566660419, 0.6299267002202009, 0.1206906911183383, -0.1446277761879955},
        {0.8371977790571115, -0.015764369584852833, -0.31062937026679327, -0.562666951622192, -0.8984947637863987},
        {-0.33445148015177995, -0.2567135004164067, 0.8987539745369246, 0.9402995886420709, 0.5378064918413052},
        {0.39524717779832685, 0.4000257286739164, -0.5890507376891594, -0.8650502298996872, -0.6140360785406336},
        {0.5718280481994695, 0.24070317428066512, -0.3737913482606834, -0.06726932177492717, -0.6980531615588608},
    }).
    WithColumns(dynamicColumn),
)
if err != nil {
    fmt.Println(err.Error())
    // handle err
}

  
    
  
```

```bash
export CLUSTER_ENDPOINT="http://localhost:19530"
export TOKEN="root:Milvus"

curl --request POST \
--url "${CLUSTER_ENDPOINT}/v2/vectordb/entities/insert" \
--header "Authorization: Bearer ${TOKEN}" \
--header "Content-Type: application/json" \
-d '{
    "data": [
        {"id": 10, "vector": [0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592], "color": "pink_8682"},
        {"id": 11, "vector": [0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104], "color": "red_7025"},
        {"id": 12, "vector": [0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592], "color": "orange_6781"},
        {"id": 13, "vector": [0.3172005263489739, 0.9719044792798428, -0.36981146090600725, -0.4860894583077995, 0.95791889146345], "color": "pink_9298"},
        {"id": 14, "vector": [0.4452349528804562, -0.8757026943054742, 0.8220779437047674, 0.46406290649483184, 0.30337481143159106], "color": "red_4794"},
        {"id": 15, "vector": [0.985825131989184, -0.8144651566660419, 0.6299267002202009, 0.1206906911183383, -0.1446277761879955], "color": "yellow_4222"},
        {"id": 16, "vector": [0.8371977790571115, -0.015764369584852833, -0.31062937026679327, -0.562666951622192, -0.8984947637863987], "color": "red_9392"},
        {"id": 17, "vector": [-0.33445148015177995, -0.2567135004164067, 0.8987539745369246, 0.9402995886420709, 0.5378064918413052], "color": "grey_8510"},
        {"id": 18, "vector": [0.39524717779832685, 0.4000257286739164, -0.5890507376891594, -0.8650502298996872, -0.6140360785406336], "color": "white_9381"},
        {"id": 19, "vector": [0.5718280481994695, 0.24070317428066512, -0.3737913482606834, -0.06726932177492717, -0.6980531615588608], "color": "purple_4976"}        
    ],
    "collectionName": "quick_setup",
    "partitionName": "partitionA"
}'

# {
#     "code": 0,
#     "data": {
#         "insertCount": 10,
#         "insertIds": [
#             10,
#             11,
#             12,
#             13,
#             14,
#             15,
#             16,
#             17,
#             18,
#             19
#         ]
#     }
# }

  
    
  
```

ç¿»è¯‘è‡ª![DeepL](/_next/static/media/deepl.d32c6a10.png)

##### ç›®å½•

-   [æ’å…¥å®ä½“](#Insert-Entities)
-   [å®ä½“æ¦‚è¿°](#Overview)
-   [å°†å®ä½“æ’å…¥ Collections](#Insert-Entities-into-a-Collection)
-   [å°†å®ä½“æ’å…¥åˆ†åŒº](#Insert-Entities-into-a-Partition)

## æƒ³è¦æ›´å¿«ã€æ›´ç®€å•ã€æ›´å¥½ç”¨çš„ Milvus SaaSæœåŠ¡ ï¼Ÿ

Zilliz Cloudæ˜¯åŸºäºMilvusçš„å…¨æ‰˜ç®¡å‘é‡æ•°æ®åº“ï¼Œæ‹¥æœ‰æ›´é«˜æ€§èƒ½ï¼Œæ›´æ˜“æ‰©å±•ï¼Œä»¥åŠå“è¶Šæ€§ä»·æ¯”

[å…è´¹è¯•ç”¨ Zilliz Cloud](https://cloud.zilliz.com.cn/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_right_card&utm_content=docs/zh/insert-update-delete.md)

##### åé¦ˆ

æ­¤é¡µå¯¹æ‚¨æ˜¯å¦æœ‰å¸®åŠ©?

Ask AI![](/inkeep/milvus-icon-white.png)
---
# æ›´æ–°å®ä½“ | Milvus æ–‡æ¡£

[ğŸš€ Zilliz äº‘ï¼šå…¨é¢ç®¡ç† Milvus - é€Ÿåº¦å¿« 10 å€ã€‚é›¶çƒ¦æ¼ã€‚ä¸“ä¸ºäººå·¥æ™ºèƒ½æ‰“é€ ã€‚ç«‹å³å…è´¹è¯•ç”¨ â†’](https://cloud.zilliz.com/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_top_banner&utm_content=docs/zh/upsert-entities.md)

[![Milvus](/images/layout/milvus-logo.svg)](/zh)

[![Zilliz](/images/layout/zilliz-logo.svg)](https://zilliz.com/)

-   ä¸ºä»€ä¹ˆé€‰æ‹© Milvus
    
    -   [ä»€ä¹ˆæ˜¯ Milvus](/zh/intro)
    -   [ä½¿ç”¨æ¡ˆä¾‹](/zh/use-cases)
    
-   [æ–‡æ¡£](/docs/zh)
-   æ•™ç¨‹
    
    -   [è®­ç»ƒè¥](/zh/bootcamp)
    -   [æ¼”ç¤º](/zh/milvus-demos)
    -   [è§†é¢‘](https://www.youtube.com/c/MilvusVectorDatabase)
    
-   å·¥å…·
    
    -   [Attu](https://github.com/zilliztech/attu)
    -   [Milvus CLI](https://github.com/zilliztech/milvus_cli)
    -   [é…ç½®å·¥å…·](/zh/tools/sizing)
    -   [Milvus å¤‡ä»½](https://github.com/zilliztech/milvus-backup)
    -   [VTS](https://github.com/zilliztech/vts)
    -   [æ·±åº¦æœç´¢å™¨](https://github.com/zilliztech/deep-searcher)
    -   [Claude Context](https://github.com/zilliztech/claude-context)
    
-   [åšå®¢](/zh/blog)
-   ç¤¾åŒº
    
    -   [ç±³å°”æ²ƒæ–¯åŠå…¬æ—¶é—´](https://meetings.hubspot.com/chloe-williams1/milvus-office-hour?uuid=4cb203e5-482a-47e0-90a6-7acc511d61f4)
    -   [æ¾å¼›](https://milvus.io/slack )
    -   [Discord](https://milvus.io/discord)
    -   [GitHub](https://github.com/milvus-io/milvus/discussions)
    -   [æ›´å¤šç¤¾åŒº](/zh/community)
    

ç®€ä½“ä¸­æ–‡

[Star42.6K](https://github.com/milvus-io/milvus)[é¢„çº¦æ¼”ç¤º](/zh/contact)[

å¼€å§‹ä½¿ç”¨

](https://cloud.zilliz.com/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_nav_right&utm_content=docs/zh/upsert-entities.md)

[![Milvus](/images/layout/milvus-logo.svg)](/zh)

[![Zilliz](/images/layout/zilliz-logo.svg)](https://zilliz.com/)

ç®€ä½“ä¸­æ–‡

æœç´¢K

[é¦–é¡µ](/docs/zh)

[v2.6.x](/docs/upsert-entities.md)

â€‹

-   å…³äº Milvus
    
-   å¼€å§‹
    
-   æ¦‚å¿µ
    
-   ç”¨æˆ·æŒ‡å—
    
    -   [æ•°æ®åº“](/docs/zh/manage_databases.md)
        
    -   Collections
        
    -   Schema å’Œæ•°æ®å­—æ®µ
        
    -   æ’å…¥å’Œåˆ é™¤
        
        -   [æ’å…¥å®ä½“](/docs/zh/insert-update-delete.md)
            
        -   [ä¸Šä¼ å®ä½“](/docs/zh/upsert-entities.md)
            
        -   [åˆ é™¤å®ä½“](/docs/zh/delete-entities.md)
            
        
    -   ç´¢å¼•
        
    -   æœç´¢
        
    -   Embeddings &amp; Rerankers
        
    -   å­˜å‚¨ä¼˜åŒ–
        
    
-   æ•°æ®å¯¼å…¥
    
-   ç®¡ç†æŒ‡å—
    
-   å·¥å…·
    
-   é›†æˆ
    
-   æ•™ç¨‹
    
-   å¸¸è§é—®é¢˜
    
-   API Reference
    

-   [é¦–é¡µ](/zh)
-   [æ–‡æ¡£](/docs/zh)
-   ç”¨æˆ·æŒ‡å—
    
-   æ’å…¥å’Œåˆ é™¤
    
-   ä¸Šä¼ å®ä½“
    

# æ›´æ–°å®ä½“

`upsert` æ“ä½œç¬¦ä¸ºåœ¨ Collections ä¸­æ’å…¥æˆ–æ›´æ–°å®ä½“æä¾›äº†ä¸€ç§ä¾¿æ·çš„æ–¹æ³•ã€‚

## æ“ä½œæ¦‚è¿°

æ‚¨å¯ä»¥ä½¿ç”¨`upsert` æ’å…¥æ–°å®ä½“æˆ–æ›´æ–°ç°æœ‰å®ä½“ï¼Œå…·ä½“å–å†³äº upsert è¯·æ±‚ä¸­æä¾›çš„ä¸»é”®æ˜¯å¦å­˜åœ¨äº Collections ä¸­ã€‚å¦‚æœæ‰¾ä¸åˆ°ä¸»é”®ï¼Œåˆ™è¿›è¡Œæ’å…¥æ“ä½œã€‚å¦åˆ™ï¼Œå°†æ‰§è¡Œæ›´æ–°æ“ä½œã€‚

åœ¨ Milvus ä¸­ï¼Œupsert å¯åœ¨**è¦†ç›–**æˆ–**åˆå¹¶**æ¨¡å¼ä¸‹å·¥ä½œã€‚

### è¦†ç›–æ¨¡å¼ä¸‹çš„upsert

è¦†ç›–æ¨¡å¼ä¸‹çš„ä¸Šè½½è¯·æ±‚ç»“åˆäº†æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚å½“æ”¶åˆ°é’ˆå¯¹ç°æœ‰å®ä½“çš„`upsert` è¯·æ±‚æ—¶ï¼ŒMilvus ä¼šæ’å…¥è¯·æ±‚æœ‰æ•ˆè½½è·ä¸­æºå¸¦çš„æ•°æ®ï¼Œå¹¶åŒæ—¶åˆ é™¤æ•°æ®ä¸­æŒ‡å®šåŸå§‹ä¸»é”®çš„ç°æœ‰å®ä½“ã€‚

 ![Upsert In Override Mode](/docs/v2.6.x/assets/upsert-in-override-mode.png)è¦†ç›–æ¨¡å¼ä¸‹çš„ä¸Šæ’å…¥

å¦‚æœç›®æ ‡ Collections çš„ä¸»å­—æ®µå¯ç”¨äº†`autoid` ï¼ŒMilvus å°†ä¸ºè¯·æ±‚æœ‰æ•ˆè½½è·ä¸­æºå¸¦çš„æ•°æ®ç”Ÿæˆä¸€ä¸ªæ–°çš„ä¸»é”®ï¼Œç„¶åå†æ’å…¥ã€‚

å¯¹äºå¯ç”¨äº†`nullable` çš„å­—æ®µï¼Œå¦‚æœä¸éœ€è¦æ›´æ–°ï¼Œå¯ä»¥åœ¨`upsert` è¯·æ±‚ä¸­çœç•¥ã€‚

### åœ¨åˆå¹¶æ¨¡å¼ä¸‹å‘ä¸Šæ’å…¥Compatible with Milvus v2.6.2+

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨`partial_update` æ ‡å¿—ï¼Œä½¿ä¸Šè½½è¯·æ±‚ä»¥åˆå¹¶æ¨¡å¼è¿è¡Œã€‚è¿™æ ·å°±å¯ä»¥åœ¨è¯·æ±‚æœ‰æ•ˆè½½è·ä¸­åªåŒ…å«éœ€è¦æ›´æ–°çš„å­—æ®µã€‚

 ![Upsert In Merge Mode](/docs/v2.6.x/assets/upsert-in-merge-mode.png)åˆå¹¶æ¨¡å¼ä¸‹çš„upsert

è¦æ‰§è¡Œåˆå¹¶ï¼Œè¯·åœ¨`upsert` è¯·æ±‚ä¸­å°†`partial_update` è®¾ç½®ä¸º`True` ï¼Œå¹¶å°†ä¸»é”®å’Œè¦æ›´æ–°çš„å­—æ®µè®¾ç½®ä¸ºæ–°å€¼ã€‚

æ”¶åˆ°è¿™æ ·çš„è¯·æ±‚åï¼ŒMilvus ä¼šæ‰§è¡Œå¼ºä¸€è‡´æ€§æŸ¥è¯¢ä»¥æ£€ç´¢å®ä½“ï¼Œæ ¹æ®è¯·æ±‚ä¸­çš„æ•°æ®æ›´æ–°å­—æ®µå€¼ï¼Œæ’å…¥ä¿®æ”¹åçš„æ•°æ®ï¼Œç„¶åç”¨è¯·æ±‚ä¸­æºå¸¦çš„åŸå§‹ä¸»é”®åˆ é™¤ç°æœ‰å®ä½“ã€‚

### å‘ä¸Šæ’å…¥è¡Œä¸ºï¼šç‰¹åˆ«æ³¨æ„äº‹é¡¹

åœ¨ä½¿ç”¨åˆå¹¶åŠŸèƒ½ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªç‰¹åˆ«æ³¨æ„äº‹é¡¹éœ€è¦è€ƒè™‘ã€‚ä»¥ä¸‹æƒ…å†µå‡è®¾ä½ æœ‰ä¸€ä¸ª Collectionsï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªæ ‡é‡å­—æ®µï¼Œåˆ†åˆ«å‘½åä¸º`title` å’Œ`issue` ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªä¸»é”®`id` å’Œä¸€ä¸ªå‘é‡å­—æ®µ`vector` ã€‚

-   **å¯ç”¨** `nullable` **çš„å‘ä¸Šæ’å…¥å­—æ®µ** **ã€‚**
    
    å‡è®¾`issue` å­—æ®µå¯ä»¥ä¸ºç©ºã€‚åœ¨å€’æ’è¿™äº›å­—æ®µæ—¶ï¼Œè¯·æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š
    
    -   å¦‚æœåœ¨`upsert` è¯·æ±‚ä¸­çœç•¥`issue` å­—æ®µå¹¶ç¦ç”¨`partial_update` ï¼Œ`issue` å­—æ®µå°†æ›´æ–°ä¸º`null` ï¼Œè€Œä¸æ˜¯ä¿ç•™å…¶åŸå§‹å€¼ã€‚
        
    -   è¦ä¿ç•™`issue` å­—æ®µçš„åŸå§‹å€¼ï¼Œè¦ä¹ˆå¯ç”¨`partial_update` å¹¶çœç•¥`issue` å­—æ®µï¼Œè¦ä¹ˆåœ¨`upsert` è¯·æ±‚ä¸­åŒ…å«`issue` å­—æ®µåŠå…¶åŸå§‹å€¼ã€‚
        
-   **åœ¨åŠ¨æ€å­—æ®µä¸­å€’æ’é”®**ã€‚
    
    å‡è®¾åœ¨ç¤ºä¾‹ Collections ä¸­å¯ç”¨äº†åŠ¨æ€é”®ï¼Œå®ä½“åŠ¨æ€å­—æ®µä¸­çš„é”®å€¼å¯¹ä¸`{"author": "John", "year": 2020, "tags": ["fiction"]}` ç±»ä¼¼ã€‚
    
    å½“ä½ å‘ä¸Šæ’å…¥å®ä½“çš„é”®ï¼Œå¦‚`author`,`year`, æˆ–`tags` ï¼Œæˆ–æ·»åŠ å…¶ä»–é”®æ—¶ï¼Œè¯·æ³¨æ„ï¼š
    
    -   å¦‚æœä¸Šè½½`partial_update` æ—¶ç¦ç”¨ï¼Œé»˜è®¤è¡Œä¸ºæ˜¯**è¦†ç›–**ã€‚è¿™æ„å‘³ç€åŠ¨æ€å­—æ®µçš„å€¼å°†è¢«è¯·æ±‚ä¸­åŒ…å«çš„æ‰€æœ‰é Schema å®šä¹‰çš„å­—æ®µåŠå…¶å€¼è¦†ç›–ã€‚
        
        ä¾‹å¦‚ï¼Œå¦‚æœè¯·æ±‚ä¸­åŒ…å«çš„æ•°æ®æ˜¯`{"author": "Jane", "genre": "fantasy"}` ï¼Œç›®æ ‡å®ä½“åŠ¨æ€å­—æ®µä¸­çš„é”®å€¼å¯¹å°†æ›´æ–°ä¸ºè¯¥å€¼ã€‚
        
    -   å¦‚æœåœ¨å¯ç”¨`partial_update` çš„æƒ…å†µä¸‹è¿›è¡Œ upsertï¼Œé»˜è®¤è¡Œä¸ºæ˜¯**åˆå¹¶**ã€‚è¿™æ„å‘³ç€åŠ¨æ€å­—æ®µçš„å€¼å°†ä¸è¯·æ±‚ä¸­åŒ…å«çš„æ‰€æœ‰é Schema å®šä¹‰çš„å­—æ®µåŠå…¶å€¼åˆå¹¶ã€‚
        
        ä¾‹å¦‚ï¼Œå¦‚æœè¯·æ±‚ä¸­åŒ…å«çš„æ•°æ®æ˜¯`{"author": "John", "year": 2020, "tags": ["fiction"]}` ï¼Œåˆ™ç›®æ ‡å®ä½“åŠ¨æ€å­—æ®µä¸­çš„é”®å€¼å¯¹åœ¨ upsert åå°†å˜æˆ`{"author": "John", "year": 2020, "tags": ["fiction"], "genre": "fantasy"}` ã€‚
        
-   **å€’æ’ä¸€ä¸ª JSON å­—æ®µã€‚**
    
    å‡è®¾ç¤ºä¾‹ Collections æœ‰ä¸€ä¸ªåä¸º`extras` çš„ Schema å®šä¹‰ JSON å­—æ®µï¼Œå®ä½“çš„æ­¤ JSON å­—æ®µä¸­çš„é”®å€¼å¯¹ç±»ä¼¼äº`{"author": "John", "year": 2020, "tags": ["fiction"]}` ã€‚
    
    å½“æ‚¨ä½¿ç”¨ä¿®æ”¹åçš„ JSON æ•°æ®å‘ä¸Šæ’å…¥å®ä½“çš„`extras` å­—æ®µæ—¶ï¼Œè¯·æ³¨æ„è¯¥ JSON å­—æ®µè¢«è§†ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œæ‚¨ä¸èƒ½æœ‰é€‰æ‹©åœ°æ›´æ–°å•ä¸ªé”®ã€‚æ¢å¥è¯è¯´ï¼ŒJSON å­—æ®µ**ä¸**æ”¯æŒ**åˆå¹¶**æ¨¡å¼ä¸‹çš„ä¸Šè½½ã€‚
    

### é™åˆ¶å’Œçº¦æŸ

åŸºäºä¸Šè¿°å†…å®¹ï¼Œæœ‰å‡ ä¸ªé™åˆ¶å’Œçº¦æŸéœ€è¦éµå¾ªï¼š

-   `upsert` è¯·æ±‚å¿…é¡»å§‹ç»ˆåŒ…å«ç›®æ ‡å®ä½“çš„ä¸»é”®ã€‚
    
-   ç›®æ ‡ Collections å¿…é¡»å·²åŠ è½½å¹¶å¯ä¾›æŸ¥è¯¢ã€‚
    
-   è¯·æ±‚ä¸­æŒ‡å®šçš„æ‰€æœ‰å­—æ®µå¿…é¡»å­˜åœ¨äºç›®æ ‡ Collections çš„ Schema ä¸­ã€‚
    
-   è¯·æ±‚ä¸­æŒ‡å®šçš„æ‰€æœ‰å­—æ®µçš„å€¼å¿…é¡»ä¸ Schema ä¸­å®šä¹‰çš„æ•°æ®ç±»å‹ç›¸åŒ¹é…ã€‚
    
-   å¯¹äºä½¿ç”¨å‡½æ•°ä»å¦ä¸€ä¸ªå­—æ®µæ´¾ç”Ÿå‡ºæ¥çš„ä»»ä½•å­—æ®µï¼ŒMilvus å°†åœ¨å€’æ’è¿‡ç¨‹ä¸­åˆ é™¤æ´¾ç”Ÿå­—æ®µï¼Œä»¥ä¾¿é‡æ–°è®¡ç®—ã€‚
    

## å€’æ’ Collections ä¸­çš„å®ä½“

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠå®ä½“ä¸Šè½½åˆ°åä¸º`my_collection` çš„ Collections ä¸­ã€‚è¯¥ Collections åªæœ‰ä¸¤ä¸ªå­—æ®µï¼Œåˆ†åˆ«åä¸º`id`,`vector`,`title` å’Œ`issue` ã€‚`id` å­—æ®µæ˜¯ä¸»å­—æ®µï¼Œè€Œ`title` å’Œ`issue` å­—æ®µæ˜¯æ ‡é‡å­—æ®µã€‚

è¿™ä¸‰ä¸ªå®ä½“å¦‚æœå­˜åœ¨äº Collections ä¸­ï¼Œå°†è¢«åŒ…å« upsert è¯·æ±‚çš„å®ä½“è¦†ç›–ã€‚

[Python](#python) [Java](#java) [NodeJS](#javascript) [Go](#go) [cURL](#bash)

```python
from pymilvus import MilvusClient

client = MilvusClient(
    uri="http://localhost:19530",
    token="root:Milvus"
)

data=[
    {
        "id": 0, 
        "vector": [-0.619954382375778, 0.4479436794798608, -0.17493894838751745, -0.4248030059917294, -0.8648452746018911],
        "title": "Artificial Intelligence in Real Life", 
        "issue": "vol.12"
    }, {
        "id": 1, 
        "vector": [0.4762662251462588, -0.6942502138717026, -0.4490002642657902, -0.628696575798281, 0.9660395877041965], 
        "title": "Hollow Man", 
        "issue": "vol.19"
    }, {
        "id": 2, 
        "vector": [-0.8864122635045097, 0.9260170474445351, 0.801326976181461, 0.6383943392381306, 0.7563037341572827], 
        "title": "Treasure Hunt in Missouri", 
        "issue": "vol.12"
    }
]

res = client.upsert(
    collection_name='my_collection',
    data=data
)

print(res)

# Output
# {'upsert_count': 3}

  
    
  
```

```java
import com.google.gson.Gson;
import com.google.gson.JsonObject;
import io.milvus.v2.client.ConnectConfig;
import io.milvus.v2.client.MilvusClientV2;
import io.milvus.v2.service.vector.request.UpsertReq;
import io.milvus.v2.service.vector.response.UpsertResp;

import java.util.*;

MilvusClientV2 client = new MilvusClientV2(ConnectConfig.builder()
        .uri("http://localhost:19530")
        .token("root:Milvus")
        .build());

Gson gson = new Gson();
List<JsonObject> data = Arrays.asList(
        gson.fromJson("{\"id\": 0, \"vector\": [-0.619954382375778, 0.4479436794798608, -0.17493894838751745, -0.4248030059917294, -0.8648452746018911], \"title\": \"Artificial Intelligence in Real Life\", \"issue\": \"\vol.12\"}", JsonObject.class),
        gson.fromJson("{\"id\": 1, \"vector\": [0.4762662251462588, -0.6942502138717026, -0.4490002642657902, -0.628696575798281, 0.9660395877041965], \"title\": \"Hollow Man\", \"issue\": \"vol.19\"}", JsonObject.class),
        gson.fromJson("{\"id\": 2, \"vector\": [-0.8864122635045097, 0.9260170474445351, 0.801326976181461, 0.6383943392381306, 0.7563037341572827], \"title\": \"Treasure Hunt in Missouri\", \"issue\": \"vol.12\"}", JsonObject.class),
);

UpsertReq upsertReq = UpsertReq.builder()
        .collectionName("my_collection")
        .data(data)
        .build();

UpsertResp upsertResp = client.upsert(upsertReq);
System.out.println(upsertResp);

// Output:
//
// UpsertResp(upsertCnt=3)

  
    
  
```

```javascript
const { MilvusClient, DataType } = require("@zilliz/milvus2-sdk-node")

const address = "http://localhost:19530";
const token = "root:Milvus";
const client = new MilvusClient({address, token});

data = [
    {id: 0, vector: [-0.619954382375778, 0.4479436794798608, -0.17493894838751745, -0.4248030059917294, -0.8648452746018911], title: "Artificial Intelligence in Real Life", issue: "vol.12"},
    {id: 1, vector: [0.4762662251462588, -0.6942502138717026, -0.4490002642657902, -0.628696575798281, 0.9660395877041965], title: "Hollow Man", issue: "vol.19"},
    {id: 2, vector: [-0.8864122635045097, 0.9260170474445351, 0.801326976181461, 0.6383943392381306, 0.7563037341572827], title: "Treasure Hunt in Missouri", issue: "vol.12"},
]

res = await client.upsert({
    collection_name: "my_collection",
    data: data,
})

console.log(res.upsert_cnt)

// Output
// 
// 3
// 

  
    
  
```

```go
import (
    "context"
    "fmt"

    "github.com/milvus-io/milvus/client/v2/column"
    "github.com/milvus-io/milvus/client/v2/milvusclient"
)

ctx, cancel := context.WithCancel(context.Background())
defer cancel()

milvusAddr := "localhost:19530"
client, err := milvusclient.New(ctx, &milvusclient.ClientConfig{
    Address: milvusAddr,
})
if err != nil {
    fmt.Println(err.Error())
    // handle error
}
defer client.Close(ctx)

titleColumn := column.NewColumnString("title", []string{
    "Artificial Intelligence in Real Life", "Hollow Man", "Treasure Hunt in Missouri", 
})

issueColumn := column.NewColumnString("issue", []string{
    "vol.12", "vol.19", "vol.12"
})

_, err = client.Upsert(ctx, milvusclient.NewColumnBasedInsertOption("my_collection").
    WithInt64Column("id", []int64{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}).
    WithFloatVectorColumn("vector", 5, [][]float32{
        {0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592},
        {0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104},
        {0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592},
    }).
    WithColumns(titleColumn, issueColumn),
)
if err != nil {
    fmt.Println(err.Error())
    // handle err
}

  
    
  
```

```bash
export CLUSTER_ENDPOINT="http://localhost:19530"
export TOKEN="root:Milvus"

curl --request POST \
--url "${CLUSTER_ENDPOINT}/v2/vectordb/entities/upsert" \
--header "Authorization: Bearer ${TOKEN}" \
--header "Content-Type: application/json" \
-d '{
    "data": [
        {"id": 0, "vector": [0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592], "title": "Artificial Intelligence in Real Life", "issue": "vol.12"},
        {"id": 1, "vector": [0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104], "title": "Hollow Man", "issue": "vol.19"},
        {"id": 2, "vector": [0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592], "title": "Treasure Hunt in Missouri", "issue": "vol.12"},
],
    "collectionName": "my_collection"
}'

# {
#     "code": 0,
#     "data": {
#         "upsertCount": 3,
#         "upsertIds": [
#             0,
#             1,
#             2,
#         ]
#     }
# }

  
    
  
```

## å‘ä¸Šæ’å…¥åˆ†åŒºä¸­çš„å®ä½“

æ‚¨è¿˜å¯ä»¥å°†å®ä½“ä¸Šè½½åˆ°æŒ‡å®šçš„åˆ†åŒºä¸­ã€‚ä»¥ä¸‹ä»£ç ç‰‡æ®µå‡å®šä½ çš„ Collection ä¸­æœ‰ä¸€ä¸ªåä¸º**PartitionA**çš„åˆ†åŒºã€‚

å¦‚æœåˆ†åŒºä¸­å­˜åœ¨ä¸‰ä¸ªå®ä½“ï¼Œå®ƒä»¬å°†è¢«è¯·æ±‚ä¸­åŒ…å«çš„å®ä½“è¦†ç›–ã€‚

[Python](#python) [Java](#java) [NodeJS](#javascript) [Go](#go) [cURL](#bash)

```python
data=[
    {
        "id": 10, 
        "vector": [0.06998888224297328, 0.8582816610326578, -0.9657938677934292, 0.6527905683627726, -0.8668460657158576], 
        "title": "Layour Design Reference", 
        "issue": "vol.34"
    },
    {
        "id": 11, 
        "vector": [0.6060703043917468, -0.3765080534566074, -0.7710758854987239, 0.36993888322346136, 0.5507513364206531], 
        "title": "Doraemon and His Friends", 
        "issue": "vol.2"
    },
    {
        "id": 12, 
        "vector": [-0.9041813104515337, -0.9610546012461163, 0.20033003106083358, 0.11842506351635174, 0.8327356724591011], 
        "title": "Pikkachu and Pokemon", 
        "issue": "vol.12"
    },
]

res = client.upsert(
    collection_name="my_collection",
    data=data,
    partition_name="partitionA"
)

print(res)

# Output
# {'upsert_count': 3}

  
    
  
```

```java
import io.milvus.v2.service.vector.request.UpsertReq;
import io.milvus.v2.service.vector.response.UpsertResp;

Gson gson = new Gson();
List<JsonObject> data = Arrays.asList(
        gson.fromJson("{\"id\": 10, \"vector\": [0.06998888224297328, 0.8582816610326578, -0.9657938677934292, 0.6527905683627726, -0.8668460657158576], \"title\": \"Layour Design Reference\", \"issue\": \"vol.34\"}", JsonObject.class),
        gson.fromJson("{\"id\": 11, \"vector\": [0.6060703043917468, -0.3765080534566074, -0.7710758854987239, 0.36993888322346136, 0.5507513364206531], \"title\": \"Doraemon and His Friends\", \"issue\": \"vol.2\"}", JsonObject.class),
        gson.fromJson("{\"id\": 12, \"vector\": [-0.9041813104515337, -0.9610546012461163, 0.20033003106083358, 0.11842506351635174, 0.8327356724591011], \"title\": \"Pikkachu and Pokemon\", \"issue\": \"vol.12\"}", JsonObject.class),
);

UpsertReq upsertReq = UpsertReq.builder()
        .collectionName("my_collection")
        .partitionName("partitionA")
        .data(data)
        .build();

UpsertResp upsertResp = client.upsert(upsertReq);
System.out.println(upsertResp);

// Output:
//
// UpsertResp(upsertCnt=3)

  
    
  
```

```javascript
const { MilvusClient, DataType } = require("@zilliz/milvus2-sdk-node")

// 6. Upsert data in partitions
data = [
    {id: 10, vector: [0.06998888224297328, 0.8582816610326578, -0.9657938677934292, 0.6527905683627726, -0.8668460657158576], title: "Layour Design Reference", issue: "vol.34"},
    {id: 11, vector: [0.6060703043917468, -0.3765080534566074, -0.7710758854987239, 0.36993888322346136, 0.5507513364206531], title: "Doraemon and His Friends", issue: "vol.2"},
    {id: 12, vector: [-0.9041813104515337, -0.9610546012461163, 0.20033003106083358, 0.11842506351635174, 0.8327356724591011], title: "Pikkachu and Pokemon", issue: "vol.12"},
]

res = await client.upsert({
    collection_name: "my_collection",
    data: data,
    partition_name: "partitionA"
})

console.log(res.upsert_cnt)

// Output
// 
// 3
// 

  
    
  
```

```go
titleColumn = column.NewColumnString("title", []string{
    "Layour Design Reference", "Doraemon and His Friends", "Pikkachu and Pokemon", 
})
issueColumn = column.NewColumnString("issue", []string{
    "vol.34", "vol.2", "vol.12", 
})

_, err = client.Upsert(ctx, milvusclient.NewColumnBasedInsertOption("my_collection").
    WithPartition("partitionA").
    WithInt64Column("id", []int64{10, 11, 12, 13, 14, 15, 16, 17, 18, 19}).
    WithFloatVectorColumn("vector", 5, [][]float32{
        {0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592},
        {0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104},
        {0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592},
    }).
    WithColumns(titleColumn, issueColumn),
)
if err != nil {
    fmt.Println(err.Error())
    // handle err
}

  
    
  
```

```bash
export CLUSTER_ENDPOINT="http://localhost:19530"
export TOKEN="root:Milvus"

curl --request POST \
--url "${CLUSTER_ENDPOINT}/v2/vectordb/entities/upsert" \
--header "Authorization: Bearer ${TOKEN}" \
--header "Content-Type: application/json" \
-d '{
    "data": [
        {"id": 10, "vector": [0.06998888224297328, 0.8582816610326578, -0.9657938677934292, 0.6527905683627726, -0.8668460657158576], "title": "Layour Design Reference", "issue": "vol.34"},
        {"id": 11, "vector": [0.6060703043917468, -0.3765080534566074, -0.7710758854987239, 0.36993888322346136, 0.5507513364206531], "title": "Doraemon and His Friends", "issue": "vol.2"},
        {"id": 12, "vector": [-0.9041813104515337, -0.9610546012461163, 0.20033003106083358, 0.11842506351635174, 0.8327356724591011], "title": "Pikkachu and Pokemon", "issue": "vol.12"},
    ],
    "collectionName": "my_collection",
    "partitionName": "partitionA"
}'

# {
#     "code": 0,
#     "data": {
#         "upsertCount": 3,
#         "upsertIds": [
#             10,
#             11,
#             12,
#         ]
#     }
# }

  
    
  
```

## åœ¨åˆå¹¶æ¨¡å¼ä¸‹å€’æ’å®ä½“Compatible with Milvus v2.6.2+

ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡éƒ¨åˆ†æ›´æ–°æ¥å€’æ’å®ä½“ã€‚åªæä¾›éœ€è¦æ›´æ–°çš„å­—æ®µåŠå…¶æ–°å€¼ï¼Œä»¥åŠæ˜¾å¼éƒ¨åˆ†æ›´æ–°æ ‡è®°ã€‚

åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œupsert è¯·æ±‚ä¸­æŒ‡å®šçš„å®ä½“çš„`issue` å­—æ®µå°†æ›´æ–°ä¸ºè¯·æ±‚ä¸­åŒ…å«çš„å€¼ã€‚

åœ¨åˆå¹¶æ¨¡å¼ä¸‹æ‰§è¡Œ upsert æ—¶ï¼Œè¯·ç¡®ä¿è¯·æ±‚ä¸­æ¶‰åŠçš„å®ä½“å…·æœ‰ç›¸åŒçš„å­—æ®µé›†ã€‚å‡è®¾æœ‰ä¸¤ä¸ªæˆ–æ›´å¤šå®ä½“è¦è¿›è¡Œupsertï¼Œå¦‚ä»¥ä¸‹ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œå®ƒä»¬å¿…é¡»åŒ…å«ç›¸åŒçš„å­—æ®µï¼Œä»¥é˜²æ­¢å‡ºç°é”™è¯¯å¹¶ä¿æŒæ•°æ®å®Œæ•´æ€§ã€‚

[Python](#python) [Java](#java) [Go](#go) [NodeJS](#javascript) [cURL](#bash)

```python
data=[
    {
        "id": 1,
        "issue": "vol.14"
    },
    {
        "id": 2, 
        "issue": "vol.7"
    }
]

res = client.upsert(
    collection_name="my_collection",
    data=data,
    partial_update=True
)

print(res)

# Output
# {'upsert_count': 2}

  
    
  
```

```java
JsonObject row1 = new JsonObject();
row1.addProperty("id", 1);
row1.addProperty("issue", "vol.14");

JsonObject row2 = new JsonObject();
row2.addProperty("id", 2);
row2.addProperty("issue", "vol.7");

UpsertReq upsertReq = UpsertReq.builder()
        .collectionName("my_collection")
        .data(Arrays.asList(row1, row2))
        .partialUpdate(true)
        .build();

UpsertResp upsertResp = client.upsert(upsertReq);
System.out.println(upsertResp);

// Output:
//
// UpsertResp(upsertCnt=2)

  
    
  
```

```go
pkColumn := column.NewColumnInt64("id", []int64{1, 2})
issueColumn = column.NewColumnString("issue", []string{
    "vol.17", "vol.7",
})

_, err = client.Upsert(ctx, milvusclient.NewColumnBasedInsertOption("my_collection").
    WithColumns(pkColumn, issueColumn).
    WithPartialUpdate(true),
)
if err != nil {
    fmt.Println(err.Error())
    // handle err
}

  
    
  
```

```javascript
const data=[
    {
        "id": 1,
        "issue": "vol.14"
    },
    {
        "id": 2, 
        "issue": "vol.7"
    }
];

const res = await client.upsert({
    collection_name: "my_collection",
    data,
    partial_update: true
});

console.log(res)

// Output
// 
// 2
// 

  
    
  
```

```bash
export CLUSTER_ENDPOINT="http://localhost:19530"
export TOKEN="root:Milvus"

export COLLECTION_NAME="my_collection"
export UPSERT_DATA='[
  {
    "id": 1,
    "issue": "vol.14"
  },
  {
    "id": 2,
    "issue": "vol.7"
  }
]'

curl -X POST "http://localhost:19530/v2/vectordb/entities/upsert" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${TOKEN}" \
  -d "{
    \"collectionName\": \"${COLLECTION_NAME}\",
    \"data\": ${UPSERT_DATA},
    \"partialUpdate\": true
  }"

# {
#     "code": 0,
#     "data": {
#         "upsertCount": 2,
#         "upsertIds": [
#              3,
#             12,
#         ]
#     }
# }

  
    
  
```

ç¿»è¯‘è‡ª![DeepL](/_next/static/media/deepl.d32c6a10.png)

##### ç›®å½•

-   [æ›´æ–°å®ä½“](#Upsert-Entities)
-   [æ“ä½œæ¦‚è¿°](#Overview)
-   [è¦†ç›–æ¨¡å¼ä¸‹çš„upsert](#Upsert-in-override-mode)
-   [åœ¨åˆå¹¶æ¨¡å¼ä¸‹å‘ä¸Šæ’å…¥Compatible with Milvus v2.6.2+](#Upsert-in-merge-mode--Milvus-v262+)
-   [å‘ä¸Šæ’å…¥è¡Œä¸ºï¼šç‰¹åˆ«æ³¨æ„äº‹é¡¹](#Upsert-behaviors-special-notes)
-   [é™åˆ¶å’Œçº¦æŸ](#Limits--Restrictions)
-   [å€’æ’ Collections ä¸­çš„å®ä½“](#Upsert-entities-in-a-collection)
-   [å‘ä¸Šæ’å…¥åˆ†åŒºä¸­çš„å®ä½“](#Upsert-entities-in-a-partition)
-   [åœ¨åˆå¹¶æ¨¡å¼ä¸‹å€’æ’å®ä½“Compatible with Milvus v2.6.2+](#Upsert-entities-in-merge-mode--Milvus-v262+)

## æƒ³è¦æ›´å¿«ã€æ›´ç®€å•ã€æ›´å¥½ç”¨çš„ Milvus SaaSæœåŠ¡ ï¼Ÿ

Zilliz Cloudæ˜¯åŸºäºMilvusçš„å…¨æ‰˜ç®¡å‘é‡æ•°æ®åº“ï¼Œæ‹¥æœ‰æ›´é«˜æ€§èƒ½ï¼Œæ›´æ˜“æ‰©å±•ï¼Œä»¥åŠå“è¶Šæ€§ä»·æ¯”

[å…è´¹è¯•ç”¨ Zilliz Cloud](https://cloud.zilliz.com.cn/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_right_card&utm_content=docs/zh/upsert-entities.md)

##### åé¦ˆ

æ­¤é¡µå¯¹æ‚¨æ˜¯å¦æœ‰å¸®åŠ©?

Ask AI![](/inkeep/milvus-icon-white.png)
---
# åˆ é™¤å®ä½“ | Milvus æ–‡æ¡£

[ğŸš€ Zilliz äº‘ï¼šå…¨é¢ç®¡ç† Milvus - é€Ÿåº¦å¿« 10 å€ã€‚é›¶çƒ¦æ¼ã€‚ä¸“ä¸ºäººå·¥æ™ºèƒ½æ‰“é€ ã€‚ç«‹å³å…è´¹è¯•ç”¨ â†’](https://cloud.zilliz.com/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_top_banner&utm_content=docs/zh/delete-entities.md)

[![Milvus](/images/layout/milvus-logo.svg)](/zh)

[![Zilliz](/images/layout/zilliz-logo.svg)](https://zilliz.com/)

-   ä¸ºä»€ä¹ˆé€‰æ‹© Milvus
    
    -   [ä»€ä¹ˆæ˜¯ Milvus](/zh/intro)
    -   [ä½¿ç”¨æ¡ˆä¾‹](/zh/use-cases)
    
-   [æ–‡æ¡£](/docs/zh)
-   æ•™ç¨‹
    
    -   [è®­ç»ƒè¥](/zh/bootcamp)
    -   [æ¼”ç¤º](/zh/milvus-demos)
    -   [è§†é¢‘](https://www.youtube.com/c/MilvusVectorDatabase)
    
-   å·¥å…·
    
    -   [Attu](https://github.com/zilliztech/attu)
    -   [Milvus CLI](https://github.com/zilliztech/milvus_cli)
    -   [é…ç½®å·¥å…·](/zh/tools/sizing)
    -   [Milvus å¤‡ä»½](https://github.com/zilliztech/milvus-backup)
    -   [VTS](https://github.com/zilliztech/vts)
    -   [æ·±åº¦æœç´¢å™¨](https://github.com/zilliztech/deep-searcher)
    -   [Claude Context](https://github.com/zilliztech/claude-context)
    
-   [åšå®¢](/zh/blog)
-   ç¤¾åŒº
    
    -   [ç±³å°”æ²ƒæ–¯åŠå…¬æ—¶é—´](https://meetings.hubspot.com/chloe-williams1/milvus-office-hour?uuid=4cb203e5-482a-47e0-90a6-7acc511d61f4)
    -   [æ¾å¼›](https://milvus.io/slack )
    -   [Discord](https://milvus.io/discord)
    -   [GitHub](https://github.com/milvus-io/milvus/discussions)
    -   [æ›´å¤šç¤¾åŒº](/zh/community)
    

ç®€ä½“ä¸­æ–‡

[Star42.6K](https://github.com/milvus-io/milvus)[é¢„çº¦æ¼”ç¤º](/zh/contact)[

å¼€å§‹ä½¿ç”¨

](https://cloud.zilliz.com/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_nav_right&utm_content=docs/zh/delete-entities.md)

[![Milvus](/images/layout/milvus-logo.svg)](/zh)

[![Zilliz](/images/layout/zilliz-logo.svg)](https://zilliz.com/)

ç®€ä½“ä¸­æ–‡

æœç´¢K

[é¦–é¡µ](/docs/zh)

[v2.6.x](/docs/delete-entities.md)

â€‹

-   å…³äº Milvus
    
-   å¼€å§‹
    
-   æ¦‚å¿µ
    
-   ç”¨æˆ·æŒ‡å—
    
    -   [æ•°æ®åº“](/docs/zh/manage_databases.md)
        
    -   Collections
        
    -   Schema å’Œæ•°æ®å­—æ®µ
        
    -   æ’å…¥å’Œåˆ é™¤
        
        -   [æ’å…¥å®ä½“](/docs/zh/insert-update-delete.md)
            
        -   [ä¸Šä¼ å®ä½“](/docs/zh/upsert-entities.md)
            
        -   [åˆ é™¤å®ä½“](/docs/zh/delete-entities.md)
            
        
    -   ç´¢å¼•
        
    -   æœç´¢
        
    -   Embeddings &amp; Rerankers
        
    -   å­˜å‚¨ä¼˜åŒ–
        
    
-   æ•°æ®å¯¼å…¥
    
-   ç®¡ç†æŒ‡å—
    
-   å·¥å…·
    
-   é›†æˆ
    
-   æ•™ç¨‹
    
-   å¸¸è§é—®é¢˜
    
-   API Reference
    

-   [é¦–é¡µ](/zh)
-   [æ–‡æ¡£](/docs/zh)
-   ç”¨æˆ·æŒ‡å—
    
-   æ’å…¥å’Œåˆ é™¤
    
-   åˆ é™¤å®ä½“
    

# åˆ é™¤å®ä½“

æ‚¨å¯ä»¥é€šè¿‡ç­›é€‰æ¡ä»¶æˆ–ä¸»é”®åˆ é™¤ä¸å†éœ€è¦çš„å®ä½“ã€‚

## é€šè¿‡ç­›é€‰æ¡ä»¶åˆ é™¤å®ä½“

æ‰¹é‡åˆ é™¤å…±äº«æŸäº›å±æ€§çš„å¤šä¸ªå®ä½“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿‡æ»¤è¡¨è¾¾å¼ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ä½¿ç”¨**in**æ“ä½œç¬¦æ‰¹é‡åˆ é™¤äº†æ‰€æœ‰**é¢œè‰²**å­—æ®µè®¾ç½®ä¸º**çº¢è‰²**å’Œ**ç´«è‰²çš„**å®ä½“ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ“ä½œç¬¦æ¥æ„å»ºç¬¦åˆä½ è¦æ±‚çš„è¿‡æ»¤è¡¨è¾¾å¼ã€‚æœ‰å…³è¿‡æ»¤è¡¨è¾¾å¼çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ã€Š[è¿‡æ»¤è¯¦è§£ã€‹](/docs/zh/boolean.md)ã€‚

[Python](#python) [Java](#java) [NodeJS](#javascript) [Go](#go) [cURL](#bash)

```python
from pymilvus import MilvusClient

client = MilvusClient(
    uri="http://localhost:19530",
    token="root:Milvus"
)

res = client.delete(
    collection_name="quick_setup",
    filter="color in ['red_7025', 'purple_4976]"
)

print(res)

# Output
# {'delete_count': 2}

  
    
  
```

```java
import io.milvus.v2.client.ConnectConfig;
import io.milvus.v2.client.MilvusClientV2;
import io.milvus.v2.service.vector.request.DeleteReq;
import io.milvus.v2.service.vector.response.DeleteResp;

ilvusClientV2 client = new MilvusClientV2(ConnectConfig.builder()
        .uri("http://localhost:19530")
        .token("root:Milvus")
        .build());

DeleteResp deleteResp = client.delete(DeleteReq.builder()
        .collectionName("quick_setup")
        .filter("color in ['red_7025', 'purple_4976]")
        .build());

  
    
  
```

```javascript
const { MilvusClient, DataType } = require("@zilliz/milvus2-sdk-node")

const address = "http://localhost:19530";
const token = "root:Milvus";
const client = new MilvusClient({address, token});

// 7. Delete entities
res = await client.delete({
    collection_name: "quick_setup",
    filter: "color in ['red_7025', 'purple_4976]"
})

console.log(res.delete_cnt)

// Output
// 
// 3
// 

  
    
  
```

```go
import (
    "context"
    "fmt"

    "github.com/milvus-io/milvus/client/v2/column"
    "github.com/milvus-io/milvus/client/v2/entity"
    "github.com/milvus-io/milvus/client/v2/milvusclient"
)

ctx, cancel := context.WithCancel(context.Background())
defer cancel()

milvusAddr := "localhost:19530"
client, err := milvusclient.New(ctx, &milvusclient.ClientConfig{
    Address: milvusAddr,
})
if err != nil {
    fmt.Println(err.Error())
    // handle error
}
defer client.Close(ctx)

_, err = client.Delete(ctx, milvusclient.NewDeleteOption("quick_setup").WithExpr("color in ['red_7025', 'purple_4976']"))
if err != nil {
    fmt.Println(err.Error())
    // handle err
}

  
    
  
```

```bash
export CLUSTER_ENDPOINT="http://localhost:19530"
export TOKEN="root:Milvus"

curl --request POST \
--url "${CLUSTER_ENDPOINT}/v2/vectordb/entities/delete" \
--header "Authorization: Bearer ${TOKEN}" \
--header "Content-Type: application/json" \
-d '{
    "collectionName": "quick_setup",
    "filter": "color in [\"red_7025\", \"purple_4976\"]"
}'

  
    
  
```

## é€šè¿‡ä¸»é”®åˆ é™¤å®ä½“

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸»é”®å”¯ä¸€æ ‡è¯†ä¸€ä¸ªå®ä½“ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨åˆ é™¤è¯·æ±‚ä¸­è®¾ç½®å®ä½“çš„ä¸»é”®æ¥åˆ é™¤å®ä½“ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åˆ é™¤ä¸»é”®ä¸º**18**å’Œ**19** çš„ä¸¤ä¸ªå®ä½“ã€‚

[Python](#python) [Java](#java) [NodeJS](#javascript) [Go](#go) [cURL](#bash)

```python
res = client.delete(
    collection_name="quick_setup",
    ids=[18, 19]
)

print(res)

# Output
# {'delete_count': 2}

  
    
  
```

```java
import io.milvus.v2.service.vector.request.DeleteReq;
import io.milvus.v2.service.vector.response.DeleteResp;

import java.util.Arrays;

DeleteResp deleteResp = client.delete(DeleteReq.builder()
        .collectionName("quick_setup")
        .ids(Arrays.asList(18, 19))
        .build());

  
    
  
```

```javascript
const { MilvusClient, DataType } = require("@zilliz/milvus2-sdk-node")

res = await client.delete({
    collection_name: "quick_setup",
    ids: [18, 19]
})

console.log(res.delete_cnt)

// Output
// 
// 2
// 

  
    
  
```

```go
_, err = client.Delete(ctx, milvusclient.NewDeleteOption("quick_setup").
    WithInt64IDs("id", []int64{18, 19}))
if err != nil {
    fmt.Println(err.Error())
    // handle err
}

  
    
  
```

```bash
export CLUSTER_ENDPOINT="http://localhost:19530"
export TOKEN="root:Milvus"

curl --request POST \
--url "${CLUSTER_ENDPOINT}/v2/vectordb/entities/delete" \
--header "Authorization: Bearer ${TOKEN}" \
--header "Content-Type: application/json" \
-d '{
    "collectionName": "quick_setup",
    "filter": "id in [18, 19]"
}'
## {"code":0,"cost":0,"data":{}}

  
    
  
```

## ä»åˆ†åŒºä¸­åˆ é™¤å®ä½“

æ‚¨è¿˜å¯ä»¥åˆ é™¤å­˜å‚¨åœ¨ç‰¹å®šåˆ†åŒºä¸­çš„å®ä½“ã€‚ä»¥ä¸‹ä»£ç ç‰‡æ®µå‡å®šæ‚¨çš„ Collection ä¸­æœ‰ä¸€ä¸ªåä¸º**PartitionA**çš„åˆ†åŒºã€‚

[Python](#python) [Java](#java) [NodeJS](#javascript) [Go](#go) [cURL](#bash)

```python
res = client.delete(
    collection_name="quick_setup",
    ids=[18, 19],
    partition_name="partitionA"
)

print(res)

# Output
# {'delete_count': 2}

  
    
  
```

```java
import io.milvus.v2.service.vector.request.DeleteReq;
import io.milvus.v2.service.vector.response.DeleteResp;

import java.util.Arrays;

DeleteResp deleteResp = client.delete(DeleteReq.builder()
        .collectionName("quick_setup")
        .ids(Arrays.asList(18, 19))
        .partitionName("partitionA")
        .build());

  
    
  
```

```javascript
const { MilvusClient, DataType } = require("@zilliz/milvus2-sdk-node")

res = await client.delete({
    collection_name: "quick_setup",
    ids: [18, 19],
    partition_name: "partitionA"
})

console.log(res.delete_cnt)

// Output
// 
// 2
// 

  
    
  
```

```go
_, err = client.Delete(ctx, milvusclient.NewDeleteOption("quick_setup").
    WithInt64IDs("id", []int64{18, 19}).
    WithPartition("partitionA"))
if err != nil {
    fmt.Println(err.Error())
    // handle err
}

  
    
  
```

```bash
export CLUSTER_ENDPOINT="http://localhost:19530"
export TOKEN="root:Milvus"

curl --request POST \
--url "${CLUSTER_ENDPOINT}/v2/vectordb/entities/delete" \
--header "Authorization: Bearer ${TOKEN}" \
--header "Content-Type: application/json" \
-d '{
    "collectionName": "quick_setup",
    "partitionName": "partitionA",
    "filter": "id in [18, 19]"
}'

# {
#     "code": 0,
#     "cost": 0,
#     "data": {}
# }

  
    
  
```

ç¿»è¯‘è‡ª![DeepL](/_next/static/media/deepl.d32c6a10.png)

##### ç›®å½•

-   [åˆ é™¤å®ä½“](#Delete-Entities)
-   [é€šè¿‡ç­›é€‰æ¡ä»¶åˆ é™¤å®ä½“](#Delete-Entities-by-Filtering-Conditions)
-   [é€šè¿‡ä¸»é”®åˆ é™¤å®ä½“](#Delete-Entities-by-Primary-Keys)
-   [ä»åˆ†åŒºä¸­åˆ é™¤å®ä½“](#Delete-Entities-from-Partitions)

## æƒ³è¦æ›´å¿«ã€æ›´ç®€å•ã€æ›´å¥½ç”¨çš„ Milvus SaaSæœåŠ¡ ï¼Ÿ

Zilliz Cloudæ˜¯åŸºäºMilvusçš„å…¨æ‰˜ç®¡å‘é‡æ•°æ®åº“ï¼Œæ‹¥æœ‰æ›´é«˜æ€§èƒ½ï¼Œæ›´æ˜“æ‰©å±•ï¼Œä»¥åŠå“è¶Šæ€§ä»·æ¯”

[å…è´¹è¯•ç”¨ Zilliz Cloud](https://cloud.zilliz.com.cn/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_right_card&utm_content=docs/zh/delete-entities.md)

##### åé¦ˆ

æ­¤é¡µå¯¹æ‚¨æ˜¯å¦æœ‰å¸®åŠ©?

Ask AI![](/inkeep/milvus-icon-white.png)