# æŸ¥è¯¢ | Milvus æ–‡æ¡£

[ğŸš€ Zilliz äº‘ï¼šå…¨é¢ç®¡ç† Milvus - é€Ÿåº¦å¿« 10 å€ã€‚é›¶çƒ¦æ¼ã€‚ä¸“ä¸ºäººå·¥æ™ºèƒ½æ‰“é€ ã€‚ç«‹å³å…è´¹è¯•ç”¨ â†’](https://cloud.zilliz.com/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_top_banner&utm_content=docs/zh/get-and-scalar-query.md)

[![Milvus](/images/layout/milvus-logo.svg)](/zh)

[![Zilliz](/images/layout/zilliz-logo.svg)](https://zilliz.com/)

-   ä¸ºä»€ä¹ˆé€‰æ‹© Milvus
    
    -   [ä»€ä¹ˆæ˜¯ Milvus](/zh/intro)
    -   [ä½¿ç”¨æ¡ˆä¾‹](/zh/use-cases)
    
-   [æ–‡æ¡£](/docs/zh)
-   æ•™ç¨‹
    
    -   [è®­ç»ƒè¥](/zh/bootcamp)
    -   [æ¼”ç¤º](/zh/milvus-demos)
    -   [è§†é¢‘](https://www.youtube.com/c/MilvusVectorDatabase)
    
-   å·¥å…·
    
    -   [Attu](https://github.com/zilliztech/attu)
    -   [Milvus CLI](https://github.com/zilliztech/milvus_cli)
    -   [é…ç½®å·¥å…·](/zh/tools/sizing)
    -   [Milvus å¤‡ä»½](https://github.com/zilliztech/milvus-backup)
    -   [VTS](https://github.com/zilliztech/vts)
    -   [æ·±åº¦æœç´¢å™¨](https://github.com/zilliztech/deep-searcher)
    -   [Claude Context](https://github.com/zilliztech/claude-context)
    
-   [åšå®¢](/zh/blog)
-   ç¤¾åŒº
    
    -   [ç±³å°”æ²ƒæ–¯åŠå…¬æ—¶é—´](https://meetings.hubspot.com/chloe-williams1/milvus-office-hour?uuid=4cb203e5-482a-47e0-90a6-7acc511d61f4)
    -   [æ¾å¼›](https://milvus.io/slack )
    -   [Discord](https://milvus.io/discord)
    -   [GitHub](https://github.com/milvus-io/milvus/discussions)
    -   [æ›´å¤šç¤¾åŒº](/zh/community)
    

ç®€ä½“ä¸­æ–‡

[Star42.6K](https://github.com/milvus-io/milvus)[é¢„çº¦æ¼”ç¤º](/zh/contact)[

å¼€å§‹ä½¿ç”¨

](https://cloud.zilliz.com/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_nav_right&utm_content=docs/zh/get-and-scalar-query.md)

[![Milvus](/images/layout/milvus-logo.svg)](/zh)

[![Zilliz](/images/layout/zilliz-logo.svg)](https://zilliz.com/)

ç®€ä½“ä¸­æ–‡

æœç´¢K

[é¦–é¡µ](/docs/zh)

[v2.6.x](/docs/get-and-scalar-query.md)

â€‹

-   å…³äº Milvus
    
-   å¼€å§‹
    
-   æ¦‚å¿µ
    
-   ç”¨æˆ·æŒ‡å—
    
    -   [æ•°æ®åº“](/docs/zh/manage_databases.md)
        
    -   Collections
        
    -   Schema å’Œæ•°æ®å­—æ®µ
        
    -   æ’å…¥å’Œåˆ é™¤
        
    -   ç´¢å¼•
        
    -   æœç´¢
        
        -   [åŸºæœ¬ ANN æœç´¢](/docs/zh/single-vector-search.md)
            
        -   [è¿‡æ»¤æœç´¢](/docs/zh/filtered-search.md)
            
        -   [èŒƒå›´æœç´¢](/docs/zh/range-search.md)
            
        -   [åˆ†ç»„æœç´¢](/docs/zh/grouping-search.md)
            
        -   [ä¸»é”®æœç´¢](/docs/zh/primary-key-search.md)
            
        -   [æ··åˆæœç´¢](/docs/zh/multi-vector-search.md)
            
        -   [æŸ¥è¯¢](/docs/zh/get-and-scalar-query.md)
            
        -   è¿‡æ»¤
            
        -   [å…¨æ–‡æ£€ç´¢](/docs/zh/full-text-search.md)
            
        -   [æ–‡æœ¬åŒ¹é…](/docs/zh/keyword-match.md)
            
        -   [æ–‡æœ¬é«˜äº®æ˜¾ç¤º](/docs/zh/text-highlighter.md)
            
        -   [çŸ­è¯­åŒ¹é…](/docs/zh/phrase-match.md)
            
        -   [ä½¿ç”¨ Embeddings åˆ—è¡¨æœç´¢](/docs/zh/search-with-embedding-lists.md)
            
        -   [å°† Elasticsearch æŸ¥è¯¢è½¬è‡³ Milvus](/docs/zh/elasticsearch-queries-to-milvus.md)
            
        -   [æœç´¢è¿­ä»£å™¨](/docs/zh/with-iterators.md)
            
        -   [ä½¿ç”¨ Partition Key](/docs/zh/use-partition-key.md)
            
        
    -   Embeddings &amp; Rerankers
        
    -   å­˜å‚¨ä¼˜åŒ–
        
    
-   æ•°æ®å¯¼å…¥
    
-   ç®¡ç†æŒ‡å—
    
-   å·¥å…·
    
-   é›†æˆ
    
-   æ•™ç¨‹
    
-   å¸¸è§é—®é¢˜
    
-   API Reference
    

-   [é¦–é¡µ](/zh)
-   [æ–‡æ¡£](/docs/zh)
-   ç”¨æˆ·æŒ‡å—
    
-   æœç´¢
    
-   æŸ¥è¯¢
    

# æŸ¥è¯¢

é™¤ ANN æœç´¢å¤–ï¼ŒMilvus è¿˜æ”¯æŒé€šè¿‡æŸ¥è¯¢è¿‡æ»¤å…ƒæ•°æ®ã€‚æœ¬é¡µå°†ä»‹ç»å¦‚ä½•ä½¿ç”¨æŸ¥è¯¢ã€è·å–å’ŒæŸ¥è¯¢è¿­ä»£å™¨æ¥æ‰§è¡Œå…ƒæ•°æ®è¿‡æ»¤ã€‚

å¦‚æœåœ¨åˆ›å»º Collections ååŠ¨æ€æ·»åŠ æ–°å­—æ®µï¼ŒåŒ…å«è¿™äº›å­—æ®µçš„æŸ¥è¯¢å°†è¿”å›å®šä¹‰çš„é»˜è®¤å€¼ï¼Œå¯¹äºæœªæ˜¾å¼è®¾ç½®å€¼çš„å®ä½“ï¼Œåˆ™è¿”å› NULLã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[å‘ç°æœ‰ Collections æ·»åŠ å­—æ®µ](/docs/zh/add-fields-to-an-existing-collection.md)ã€‚

## é›†åˆæ¦‚è¿°

Collections å¯ä»¥å­˜å‚¨å„ç§ç±»å‹çš„æ ‡é‡å­—æ®µã€‚ä½ å¯ä»¥è®© Milvus æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡é‡å­—æ®µè¿‡æ»¤å®ä½“ã€‚Milvus æä¾›ä¸‰ç§ç±»å‹çš„æŸ¥è¯¢ï¼šæŸ¥è¯¢ã€è·å–å’ŒæŸ¥è¯¢è¿­ä»£å™¨ã€‚ä¸‹è¡¨æ¯”è¾ƒäº†è¿™ä¸‰ç§æŸ¥è¯¢ç±»å‹ã€‚

è·å–

æŸ¥è¯¢

æŸ¥è¯¢è¿­ä»£å™¨

é€‚ç”¨æƒ…å†µ

æŸ¥æ‰¾æŒæœ‰æŒ‡å®šä¸»é”®çš„å®ä½“ã€‚

æŸ¥æ‰¾ç¬¦åˆè‡ªå®šä¹‰ç­›é€‰æ¡ä»¶çš„æ‰€æœ‰å®ä½“æˆ–æŒ‡å®šæ•°é‡çš„å®ä½“

åœ¨åˆ†é¡µæŸ¥è¯¢ä¸­æŸ¥æ‰¾æ»¡è¶³è‡ªå®šä¹‰ç­›é€‰æ¡ä»¶çš„æ‰€æœ‰å®ä½“ã€‚

è¿‡æ»¤æ–¹æ³•

é€šè¿‡ä¸»é”®

é€šè¿‡è¿‡æ»¤è¡¨è¾¾å¼

é€šè¿‡è¿‡æ»¤è¡¨è¾¾å¼

å¿…å¡«å‚æ•°

-   Collections åç§°
    
-   ä¸»é”®
    

-   Collections åç§°
    
-   è¿‡æ»¤è¡¨è¾¾å¼
    

-   Collections åç§°
    
-   è¿‡æ»¤è¡¨è¾¾å¼
    
-   æ¯æ¬¡æŸ¥è¯¢è¿”å›çš„å®ä½“æ•°é‡
    

å¯é€‰å‚æ•°

-   åˆ†åŒºåç§°
    
-   è¾“å‡ºå­—æ®µ
    

-   åˆ†åŒºåç§°
    
-   è¦è¿”å›çš„å®ä½“æ•°é‡
    
-   è¾“å‡ºå­—æ®µ
    

-   åˆ†åŒºåç§°
    
-   è¦è¿”å›çš„å®ä½“æ€»æ•°
    
-   è¾“å‡ºå­—æ®µ
    

è¿”å›å€¼

è¿”å›æŒ‡å®šé›†åˆæˆ–åˆ†åŒºä¸­æŒæœ‰æŒ‡å®šä¸»é”®çš„å®ä½“ã€‚

è¿”å›æŒ‡å®šé›†åˆæˆ–åˆ†åŒºä¸­ç¬¦åˆè‡ªå®šä¹‰ç­›é€‰æ¡ä»¶çš„æ‰€æœ‰å®ä½“æˆ–æŒ‡å®šæ•°é‡çš„å®ä½“ã€‚

é€šè¿‡åˆ†é¡µæŸ¥è¯¢è¿”å›æŒ‡å®šé›†åˆæˆ–åˆ†åŒºä¸­ç¬¦åˆè‡ªå®šä¹‰è¿‡æ»¤æ¡ä»¶çš„æ‰€æœ‰å®ä½“ã€‚

æœ‰å…³å…ƒæ•°æ®è¿‡æ»¤çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… .NET Framework 3.0ã€‚

## ä½¿ç”¨è·å–

å½“éœ€è¦é€šè¿‡ä¸»é”®æŸ¥æ‰¾å®ä½“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨**Get**æ–¹æ³•ã€‚ä»¥ä¸‹ä»£ç ç¤ºä¾‹å‡å®šåœ¨ Collections ä¸­æœ‰ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«åä¸º`id` ã€`vector` å’Œ`color` ã€‚

```python
[
        {"id": 0, "vector": [0.3580376395471989, -0.6023495712049978, 0.18414012509913835, -0.26286205330961354, 0.9029438446296592], "color": "pink_8682"},
        {"id": 1, "vector": [0.19886812562848388, 0.06023560599112088, 0.6976963061752597, 0.2614474506242501, 0.838729485096104], "color": "red_7025"},
        {"id": 2, "vector": [0.43742130801983836, -0.5597502546264526, 0.6457887650909682, 0.7894058910881185, 0.20785793220625592], "color": "orange_6781"},
        {"id": 3, "vector": [0.3172005263489739, 0.9719044792798428, -0.36981146090600725, -0.4860894583077995, 0.95791889146345], "color": "pink_9298"},
        {"id": 4, "vector": [0.4452349528804562, -0.8757026943054742, 0.8220779437047674, 0.46406290649483184, 0.30337481143159106], "color": "red_4794"},
        {"id": 5, "vector": [0.985825131989184, -0.8144651566660419, 0.6299267002202009, 0.1206906911183383, -0.1446277761879955], "color": "yellow_4222"},
        {"id": 6, "vector": [0.8371977790571115, -0.015764369584852833, -0.31062937026679327, -0.562666951622192, -0.8984947637863987], "color": "red_9392"},
        {"id": 7, "vector": [-0.33445148015177995, -0.2567135004164067, 0.8987539745369246, 0.9402995886420709, 0.5378064918413052], "color": "grey_8510"},
        {"id": 8, "vector": [0.39524717779832685, 0.4000257286739164, -0.5890507376891594, -0.8650502298996872, -0.6140360785406336], "color": "white_9381"},
        {"id": 9, "vector": [0.5718280481994695, 0.24070317428066512, -0.3737913482606834, -0.06726932177492717, -0.6980531615588608], "color": "purple_4976"},
]

  
    
  
```

æ‚¨å¯ä»¥é€šè¿‡å®ƒä»¬çš„ ID è·å–å®ä½“ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

[Python](#python) [Java](#java) [Go](#go) [NodeJS](#javascript) [cURL](#bash)

```python
from pymilvus import MilvusClient

client = MilvusClient(
    uri="http://localhost:19530",
    token="root:Milvus"
)

res = client.get(
    collection_name="my_collection",
    ids=[0, 1, 2],
    output_fields=["vector", "color"]
)

print(res)

  
    
  
```

```java
import io.milvus.v2.client.ConnectConfig;
import io.milvus.v2.client.MilvusClientV2;
import io.milvus.v2.service.vector.request.GetReq
import io.milvus.v2.service.vector.request.GetResp
import io.milvus.v2.service.vector.response.QueryResp;
import java.util.*;

MilvusClientV2 client = new MilvusClientV2(ConnectConfig.builder()
        .uri("http://localhost:19530")
        .token("root:Milvus")
        .build());
        
GetReq getReq = GetReq.builder()
        .collectionName("my_collection")
        .ids(Arrays.asList(0, 1, 2))
        .outputFields(Arrays.asList("vector", "color"))
        .build();

GetResp getResp = client.get(getReq);

List<QueryResp.QueryResult> results = getResp.getGetResults();
for (QueryResp.QueryResult result : results) {
    System.out.println(result.getEntity());
}

// Output
// {color=pink_8682, vector=[0.35803765, -0.6023496, 0.18414013, -0.26286206, 0.90294385], id=0}
// {color=red_7025, vector=[0.19886813, 0.060235605, 0.6976963, 0.26144746, 0.8387295], id=1}
// {color=orange_6781, vector=[0.43742132, -0.55975026, 0.6457888, 0.7894059, 0.20785794], id=2}

  
    
  
```

```go
import (
    "context"
    "fmt"

    "github.com/milvus-io/milvus/client/v2/column"
    "github.com/milvus-io/milvus/client/v2/entity"
    "github.com/milvus-io/milvus/client/v2/milvusclient"
)

ctx, cancel := context.WithCancel(context.Background())
defer cancel()

milvusAddr := "localhost:19530"
client, err := milvusclient.New(ctx, &milvusclient.ClientConfig{
    Address: milvusAddr,
})
if err != nil {
    fmt.Println(err.Error())
    // handle error
}
defer client.Close(ctx)

resultSet, err := client.Get(ctx, milvusclient.NewQueryOption("my_collection").
    WithConsistencyLevel(entity.ClStrong).
    WithIDs(column.NewColumnInt64("id", []int64{0, 1, 2})).
    WithOutputFields("vector", "color"))
if err != nil {
    fmt.Println(err.Error())
    // handle error
}

fmt.Println("id: ", resultSet.GetColumn("id").FieldData().GetScalars())
fmt.Println("vector: ", resultSet.GetColumn("vector").FieldData().GetVectors())
fmt.Println("color: ", resultSet.GetColumn("color").FieldData().GetScalars())

  
    
  
```

```javascript
import { MilvusClient, DataType } from "@zilliz/milvus2-sdk-node";

const address = "http://localhost:19530";
const token = "root:Milvus";
const client = new MilvusClient({address, token});

const res = client.get({
    collection_name="my_collection",
    ids=[0,1,2],
    output_fields=["vector", "color"]
})

  
    
  
```

```bash
export CLUSTER_ENDPOINT="http://localhost:19530"
export TOKEN="root:Milvus"

curl --request POST \
--url "${CLUSTER_ENDPOINT}/v2/vectordb/entities/get" \
--header "Authorization: Bearer ${TOKEN}" \
--header "Content-Type: application/json" \
-d '{
    "collectionName": "my_collection",
    "id": [0, 1, 2],
    "outputFields": ["vector", "color"]
}'

# {"code":0,"cost":0,"data":[{"color":"pink_8682","id":0,"vector":[0.35803765,-0.6023496,0.18414013,-0.26286206,0.90294385]},{"color":"red_7025","id":1,"vector":[0.19886813,0.060235605,0.6976963,0.26144746,0.8387295]},{"color":"orange_6781","id":2,"vector":[0.43742132,-0.55975026,0.6457888,0.7894059,0.20785794]}]}

  
    
  
```

## ä½¿ç”¨æŸ¥è¯¢

å½“æ‚¨éœ€è¦é€šè¿‡è‡ªå®šä¹‰è¿‡æ»¤æ¡ä»¶æŸ¥æ‰¾å®ä½“æ—¶ï¼Œè¯·ä½¿ç”¨**Query**æ–¹æ³•ã€‚ä»¥ä¸‹ä»£ç ç¤ºä¾‹å‡å®šæœ‰ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«åä¸º`id` ã€`vector` å’Œ`color` ï¼Œå¹¶è¿”å›ä»`red` å¼€å§‹æŒæœ‰`color` å€¼çš„å®ä½“çš„æŒ‡å®šæ•°ç›®ã€‚

[Python](#python) [Java](#java) [Go](#go) [NodeJS](#javascript) [cURL](#bash)

```python
from pymilvus import MilvusClient

client = MilvusClient(
    uri="http://localhost:19530",
    token="root:Milvus"
)

res = client.query(
    collection_name="my_collection",
    filter="color like \"red%\"",
    output_fields=["vector", "color"],
    limit=3
)

  
    
  
```

```java
import io.milvus.v2.service.vector.request.QueryReq
import io.milvus.v2.service.vector.request.QueryResp

QueryReq queryReq = QueryReq.builder()
        .collectionName("my_collection")
        .filter("color like \"red%\"")
        .outputFields(Arrays.asList("vector", "color"))
        .limit(3)
        .build();

QueryResp queryResp = client.query(queryReq);

List<QueryResp.QueryResult> results = queryResp.getQueryResults();
for (QueryResp.QueryResult result : results) {
    System.out.println(result.getEntity());
}

// Output
// {color=red_7025, vector=[0.19886813, 0.060235605, 0.6976963, 0.26144746, 0.8387295], id=1}
// {color=red_4794, vector=[0.44523495, -0.8757027, 0.82207793, 0.4640629, 0.3033748], id=4}
// {color=red_9392, vector=[0.8371978, -0.015764369, -0.31062937, -0.56266695, -0.8984948], id=6}

  
    
  
```

```go
resultSet, err := client.Query(ctx, milvusclient.NewQueryOption("my_collection").
    WithFilter("color like \"red%\"").
    WithOutputFields("vector", "color"))
if err != nil {
    fmt.Println(err.Error())
    // handle error
}

fmt.Println("id: ", resultSet.GetColumn("id").FieldData().GetScalars())
fmt.Println("vector: ", resultSet.GetColumn("vector").FieldData().GetVectors())
fmt.Println("color: ", resultSet.GetColumn("color").FieldData().GetScalars())

  
    
  
```

```javascript
import { MilvusClient, DataType } from "@zilliz/milvus2-sdk-node";

const address = "http://localhost:19530";
const token = "root:Milvus";
const client = new MilvusClient({address, token});

const res = client.query({
    collection_name="my_collection",
    filter='color like "red%"',
    output_fields=["vector", "color"],
    limit(3)
})

  
    
  
```

```bash
export CLUSTER_ENDPOINT="http://localhost:19530"
export TOKEN="root:Milvus"

curl --request POST \
--url "${CLUSTER_ENDPOINT}/v2/vectordb/entities/query" \
--header "Authorization: Bearer ${TOKEN}" \
--header "Content-Type: application/json" \
-d '{
    "collectionName": "my_collection",
    "filter": "color like \"red%\"",
    "limit": 3,
    "outputFields": ["vector", "color"]
}'
#{"code":0,"cost":0,"data":[{"color":"red_7025","id":1,"vector":[0.19886813,0.060235605,0.6976963,0.26144746,0.8387295]},{"color":"red_4794","id":4,"vector":[0.44523495,-0.8757027,0.82207793,0.4640629,0.3033748]},{"color":"red_9392","id":6,"vector":[0.8371978,-0.015764369,-0.31062937,-0.56266695,-0.8984948]}]}

  
    
  
```

## ä½¿ç”¨æŸ¥è¯¢è¿­ä»£å™¨

å½“æ‚¨éœ€è¦é€šè¿‡åˆ†é¡µæŸ¥è¯¢æŒ‰è‡ªå®šä¹‰è¿‡æ»¤æ¡ä»¶æŸ¥æ‰¾å®ä½“æ—¶ï¼Œå¯åˆ›å»ºä¸€ä¸ª**QueryIterator**å¹¶ä½¿ç”¨å…¶**next()**æ–¹æ³•éå†æ‰€æœ‰å®ä½“ï¼Œä»¥æŸ¥æ‰¾æ»¡è¶³è¿‡æ»¤æ¡ä»¶çš„å®ä½“ã€‚ä»¥ä¸‹ä»£ç ç¤ºä¾‹å‡å®šæœ‰ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«åä¸º`id` ã€`vector` å’Œ`color` ï¼Œå¹¶ä»`red` å¼€å§‹è¿”å›æŒæœ‰`color` å€¼çš„æ‰€æœ‰å®ä½“ã€‚

[Python](#python) [Java](#java) [Go](#go) [NodeJS](#javascript) [cURL](#bash)

```python
from pymilvus import connections, Collection

connections.connect(
    uri="http://localhost:19530",
    token="root:Milvus"
)

collection = Collection("my_collection")

iterator = collection.query_iterator(
    batch_size=10,
    expr="color like \"red%\"",
    output_fields=["color"]
)

results = []

while True:
    result = iterator.next()
    if not result:
        iterator.close()
        break

    print(result)
    results += result

  
    
  
```

```java
import io.milvus.orm.iterator.QueryIterator;
import io.milvus.response.QueryResultsWrapper;
import io.milvus.v2.common.ConsistencyLevel;
import io.milvus.v2.service.vector.request.QueryIteratorReq;

QueryIteratorReq req = QueryIteratorReq.builder()
        .collectionName("my_collection")
        .expr("color like \"red%\"")
        .batchSize(50L)
        .outputFields(Collections.singletonList("color"))
        .consistencyLevel(ConsistencyLevel.BOUNDED)
        .build();
QueryIterator queryIterator = client.queryIterator(req);

while (true) {
    List<QueryResultsWrapper.RowRecord> res = queryIterator.next();
    if (res.isEmpty()) {
        queryIterator.close();
        break;
    }

    for (QueryResultsWrapper.RowRecord record : res) {
        System.out.println(record);
    }
}

// Output
// [color:red_7025, id:1]
// [color:red_4794, id:4]
// [color:red_9392, id:6]

  
    
  
```

```go
// go

  
    
  
```

```javascript
import { MilvusClient, DataType } from "@zilliz/milvus2-sdk-node";

const iterator = await milvusClient.queryIterator({
  collection_name: 'my_collection',
  batchSize: 10,
  expr: 'color like "red%"',
  output_fields: ['color'],
});

const results = [];
for await (const value of iterator) {
  results.push(...value);
  page += 1;
}

  
    
  
```

```bash
# Not available

  
    
  
```

## åˆ†åŒºä¸­çš„æŸ¥è¯¢

æ‚¨è¿˜å¯ä»¥é€šè¿‡åœ¨ Getã€Query æˆ– QueryIterator è¯·æ±‚ä¸­åŒ…å«åˆ†åŒºåç§°ï¼Œåœ¨ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†åŒºä¸­æ‰§è¡ŒæŸ¥è¯¢ã€‚ä»¥ä¸‹ä»£ç ç¤ºä¾‹å‡å®š Collections ä¸­æœ‰ä¸€ä¸ªåä¸º**PartitionA**çš„åˆ†åŒºã€‚

[Python](#python) [Java](#java) [Go](#go) [NodeJS](#javascript) [cURL](#bash)

```python
from pymilvus import MilvusClient
client = MilvusClient(
    uri="http://localhost:19530",
    token="root:Milvus"
)

res = client.get(
    collection_name="my_collection",
    partitionNames=["partitionA"],
    ids=[10, 11, 12],
    output_fields=["vector", "color"]
)

from pymilvus import MilvusClient

client = MilvusClient(
    uri="http://localhost:19530",
    token="root:Milvus"
)

res = client.query(
    collection_name="my_collection",
    partitionNames=["partitionA"],
    filter="color like \"red%\"",
    output_fields=["vector", "color"],
    limit=3
)

# Use QueryIterator
from pymilvus import connections, Collection

connections.connect(
    uri="http://localhost:19530",
    token="root:Milvus"
)

collection = Collection("my_collection")

iterator = collection.query_iterator(
    partition_names=["partitionA"],
    batch_size=10,
    expr="color like \"red%\"",
    output_fields=["color"]
)

results = []

while True:
    result = iterator.next()
    if not result:
        iterator.close()
        break

    print(result)
    results += result

  
    
  
```

```java
GetReq getReq = GetReq.builder()
        .collectionName("my_collection")
        .partitionName("partitionA")
        .ids(Arrays.asList(10, 11, 12))
        .outputFields(Collections.singletonList("color"))
        .build();

GetResp getResp = client.get(getReq);

QueryReq queryReq = QueryReq.builder()
        .collectionName("my_collection")
        .partitionNames(Collections.singletonList("partitionA"))
        .filter("color like \"red%\"")
        .outputFields(Collections.singletonList("color"))
        .limit(3)
        .build();

QueryResp getResp = client.query(queryReq);

QueryIteratorReq req = QueryIteratorReq.builder()
        .collectionName("my_collection")
        .partitionNames(Collections.singletonList("partitionA"))
        .expr("color like \"red%\"")
        .batchSize(50L)
        .outputFields(Collections.singletonList("color"))
        .consistencyLevel(ConsistencyLevel.BOUNDED)
        .build();
QueryIterator queryIterator = client.queryIterator(req);

  
    
  
```

```go
resultSet, err := client.Get(ctx, milvusclient.NewQueryOption("my_collection").
    WithPartitions("partitionA").
    WithIDs(column.NewColumnInt64("id", []int64{10, 11, 12})).
    WithOutputFields("vector", "color"))
if err != nil {
    fmt.Println(err.Error())
    // handle error
}

fmt.Println("id: ", resultSet.GetColumn("id").FieldData().GetScalars())
fmt.Println("vector: ", resultSet.GetColumn("vector").FieldData().GetVectors())
fmt.Println("color: ", resultSet.GetColumn("color").FieldData().GetScalars())

resultSet, err := client.Query(ctx, milvusclient.NewQueryOption("my_collection").
    WithPartitions("partitionA").
    WithFilter("color like \"red%\"").
    WithOutputFields("vector", "color"))
if err != nil {
    fmt.Println(err.Error())
    // handle error
}

fmt.Println("id: ", resultSet.GetColumn("id").FieldData().GetScalars())
fmt.Println("vector: ", resultSet.GetColumn("vector").FieldData().GetVectors())
fmt.Println("color: ", resultSet.GetColumn("color").FieldData().GetScalars())

  
    
  
```

```javascript
import { MilvusClient, DataType } from "@zilliz/milvus2-sdk-node";

const address = "http://localhost:19530";
const token = "root:Milvus";
const client = new MilvusClient({address, token});

// Use get
var res = client.query({
    collection_name="my_collection",
    partition_names=["partitionA"],
    filter='color like "red%"',
    output_fields=["vector", "color"],
    limit(3)
})

// Use query
res = client.query({
    collection_name="my_collection",
    partition_names=["partitionA"],
    filter="color like \"red%\"",
    output_fields=["vector", "color"],
    limit(3)
})

// Use queryiterator
const iterator = await milvusClient.queryIterator({
  collection_name: 'my_collection',
  partition_names: ['partitionA'],
  batchSize: 10,
  expr: 'color like "red%"',
  output_fields: ['vector', 'color'],
});

const results = [];
for await (const value of iterator) {
  results.push(...value);
  page += 1;
}

  
    
  
```

```bash
export CLUSTER_ENDPOINT="http://localhost:19530"
export TOKEN="root:Milvus"

# Use get
curl --request POST \
--url "${CLUSTER_ENDPOINT}/v2/vectordb/entities/get" \
--header "Authorization: Bearer ${TOKEN}" \
--header "Content-Type: application/json" \
-d '{
    "collectionName": "my_collection",
    "partitionNames": ["partitionA"],
    "id": [0, 1, 2],
    "outputFields": ["vector", "color"]
}'

# Use query
curl --request POST \
--url "${CLUSTER_ENDPOINT}/v2/vectordb/entities/get" \
--header "Authorization: Bearer ${TOKEN}" \
--header "Content-Type: application/json" \
-d '{
    "collectionName": "my_collection",
    "partitionNames": ["partitionA"],
    "filter": "color like \"red%\"",
    "limit": 3,
    "outputFields": ["vector", "color"],
    "id": [0, 1, 2]
}'

  
    
  
```

## ä½¿ç”¨æŸ¥è¯¢è¿›è¡ŒéšæœºæŠ½æ ·

è¦ä» Collections ä¸­æå–å…·æœ‰ä»£è¡¨æ€§çš„æ•°æ®å­é›†ç”¨äºæ•°æ®æ¢ç´¢æˆ–å¼€å‘æµ‹è¯•ï¼Œè¯·ä½¿ç”¨`RANDOM_SAMPLE(sampling_factor)` è¡¨è¾¾å¼ï¼Œå…¶ä¸­`sampling_factor` æ˜¯ä»‹äº 0 å’Œ 1 ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œä»£è¡¨è¦é‡‡æ ·çš„æ•°æ®ç™¾åˆ†æ¯”ã€‚

æœ‰å…³è¯¦ç»†ç”¨æ³•ã€é«˜çº§ç¤ºä¾‹å’Œæœ€ä½³å®è·µï¼Œè¯·å‚é˜…[éšæœºæŠ½æ ·](/docs/zh/random-sampling.md)ã€‚

[Python](#python) [Java](#java) [Go](#go) [NodeJS](#javascript) [cURL](#bash)

```python
from pymilvus import MilvusClient

client = MilvusClient(
    uri="http://localhost:19530",
    token="root:Milvus"
)

# Sample 1% of the entire collection
res = client.query(
    collection_name="my_collection",
    filter="RANDOM_SAMPLE(0.01)",
    output_fields=["vector", "color"]
)

print(f"Sampled {len(res)} entities from collection")

# Combine with other filters - first filter, then sample
res = client.query(
    collection_name="my_collection", 
    filter="color like \"red%\" AND RANDOM_SAMPLE(0.005)",
    output_fields=["vector", "color"],
    limit=10
)

print(f"Found {len(res)} red items in sample")

  
    
  
```

```java
import io.milvus.v2.client.ConnectConfig;
import io.milvus.v2.client.MilvusClientV2;
import io.milvus.v2.service.vector.request.GetReq
import io.milvus.v2.service.vector.request.GetResp
import io.milvus.v2.service.vector.request.QueryReq
import io.milvus.v2.service.vector.request.QueryResp
import java.util.*;

MilvusClientV2 client = new MilvusClientV2(ConnectConfig.builder()
        .uri("http://localhost:19530")
        .token("root:Milvus")
        .build());

QueryReq queryReq = QueryReq.builder()
        .collectionName("my_collection")
        .filter("RANDOM_SAMPLE(0.01)")
        .outputFields(Arrays.asList("vector", "color"))
        .build();

QueryResp getResp = client.query(queryReq);
for (QueryResp.QueryResult result : getResp.getQueryResults()) {
    System.out.println(result.getEntity());
}

queryReq = QueryReq.builder()
        .collectionName("my_collection")
        .filter("color like \"red%\" AND RANDOM_SAMPLE(0.005)")
        .outputFields(Arrays.asList("vector", "color"))
        .limit(10)
        .build();

getResp = client.query(queryReq);
for (QueryResp.QueryResult result : getResp.getQueryResults()) {
    System.out.println(result.getEntity());
}

  
    
  
```

```go
import (
    "context"
    "fmt"

    "github.com/milvus-io/milvus/client/v2/column"
    "github.com/milvus-io/milvus/client/v2/entity"
    "github.com/milvus-io/milvus/client/v2/milvusclient"
)

ctx, cancel := context.WithCancel(context.Background())
defer cancel()

milvusAddr := "localhost:19530"
client, err := milvusclient.New(ctx, &milvusclient.ClientConfig{
    Address: milvusAddr,
})
if err != nil {
    return err
}

resultSet, err := client.Query(ctx, milvusclient.NewQueryOption("my_collection").
    WithFilter("RANDOM_SAMPLE(0.01)").
    WithOutputFields("vector", "color"))
if err != nil {
    return err
}

resultSet, err = client.Query(ctx, milvusclient.NewQueryOption("my_collection").
    WithFilter("color like \"red%\" AND RANDOM_SAMPLE(0.005)").
    WithLimit(10).
    WithOutputFields("vector", "color"))
if err != nil {
    return err
}

  
    
  
```

```javascript
// node

  
    
  
```

```bash
# restful

  
    
  
```

## ä¸ºæŸ¥è¯¢ä¸´æ—¶è®¾ç½®æ—¶åŒº

å¦‚æœæ‚¨çš„ Collections æœ‰`TIMESTAMPTZ` å­—æ®µï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨æŸ¥è¯¢è°ƒç”¨ä¸­è®¾ç½®`timezone` å‚æ•°ï¼Œä¸ºå•æ¬¡æ“ä½œä¸´æ—¶è¦†ç›–æ•°æ®åº“æˆ– Collections çš„é»˜è®¤æ—¶åŒºã€‚è¿™å¯ä»¥æ§åˆ¶`TIMESTAMPTZ` å€¼åœ¨æ“ä½œè¿‡ç¨‹ä¸­çš„æ˜¾ç¤ºå’Œæ¯”è¾ƒæ–¹å¼ã€‚

`timezone` çš„å€¼å¿…é¡»æ˜¯æœ‰æ•ˆçš„[IANA æ—¶åŒºæ ‡è¯†ç¬¦](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)ï¼ˆä¾‹å¦‚ï¼Œ**äºšæ´²/ä¸Šæµ·**ã€**ç¾å›½/èŠåŠ å“¥**æˆ–**UTC**ï¼‰ã€‚æœ‰å…³å¦‚ä½•ä½¿ç”¨`TIMESTAMPTZ` å­—æ®µçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[TIMESTAMPTZ å­—æ®µ](/docs/zh/timestamptz-field.md)ã€‚

ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä¸ºæŸ¥è¯¢æ“ä½œä¸´æ—¶è®¾ç½®æ—¶åŒºï¼š

[Python](#python) [Java](#java) [NodeJS](#javascript) [Go](#go) [cURL](#bash)

```python
# Query data and display the tsz field converted to "America/Havana"
results = client.query(
    collection_name,
    filter="id <= 10",
    output_fields=["id", "tsz", "vec"],
    limit=2,
    timezone="America/Havana",
)

  
    
  
```

```java
// java

  
    
  
```

```javascript
// js

  
    
  
```

```go
// go

  
    
  
```

```bash
# restful

  
    
  
```

ç¿»è¯‘è‡ª![DeepL](/_next/static/media/deepl.d32c6a10.png)

##### ç›®å½•

-   [æŸ¥è¯¢](#Query)
-   [é›†åˆæ¦‚è¿°](#Overview)
-   [ä½¿ç”¨è·å–](#Use-Get)
-   [ä½¿ç”¨æŸ¥è¯¢](#Use-Query)
-   [ä½¿ç”¨æŸ¥è¯¢è¿­ä»£å™¨](#Use-QueryIterator)
-   [åˆ†åŒºä¸­çš„æŸ¥è¯¢](#Queries-in-Partitions)
-   [ä½¿ç”¨æŸ¥è¯¢è¿›è¡ŒéšæœºæŠ½æ ·](#Random-Sampling-with-Query)
-   [ä¸ºæŸ¥è¯¢ä¸´æ—¶è®¾ç½®æ—¶åŒº](#Temporarily-set-a-timezone-for-a-query)

## æƒ³è¦æ›´å¿«ã€æ›´ç®€å•ã€æ›´å¥½ç”¨çš„ Milvus SaaSæœåŠ¡ ï¼Ÿ

Zilliz Cloudæ˜¯åŸºäºMilvusçš„å…¨æ‰˜ç®¡å‘é‡æ•°æ®åº“ï¼Œæ‹¥æœ‰æ›´é«˜æ€§èƒ½ï¼Œæ›´æ˜“æ‰©å±•ï¼Œä»¥åŠå“è¶Šæ€§ä»·æ¯”

[å…è´¹è¯•ç”¨ Zilliz Cloud](https://cloud.zilliz.com.cn/signup?utm_source=milvusio&utm_medium=referral&utm_campaign=milvus_right_card&utm_content=docs/zh/get-and-scalar-query.md)

##### åé¦ˆ

æ­¤é¡µå¯¹æ‚¨æ˜¯å¦æœ‰å¸®åŠ©?

Ask AI![](/inkeep/milvus-icon-white.png)